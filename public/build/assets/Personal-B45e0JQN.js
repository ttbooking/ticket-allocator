import{S as j,O as B,P as O,d as l,R as D,T as r,U as s,W as U,F as _,a3 as $,Y as g,$ as x,a2 as C,b7 as A,a4 as L,a5 as R,a6 as E,ae as T,af as F,f as c,ag as H,X as u,_ as V,Z as W,ab as q,a0 as b,a9 as z}from"./app-TngPryuK.js";import{M as G,a as X,c as P,O as Y,T as Z,k as J,C as K,m as n,V as Q,n as ee}from"./OperatorRepository-BuHsrDSC.js";import{T as te}from"./TransitionGroup-DSDUhj-i.js";import{V as ae}from"./VContainer-DBLbT5xn.js";import{V as se,a as oe}from"./VRow-CF2n4Z-N.js";import{V as ne}from"./VTable-Bsvf5FNg.js";import"./VInput-DGqB8Wgs.js";import"./VSelectionControl-2VJbAaxg.js";/* empty css              */const le={timestamp:d=>{const o=j(d);return o.isBefore(Date.now(),"day")?`${o.format("L LT")} (${o.fromNow()})`:`${o.format("LT")} (${o.fromNow()})`}},re=["innerHTML"],ue=B({__name:"PersonalTicket",props:{ticket:{},columns:{}},setup(d){O(e=>({"37d8060d":k.value.delay,"16ef866c":k.value.duration}));const o=d,i=new G({linkify:!0}).use(X),m=P(),a=l(()=>D().props.options),v=l(()=>a.value[`${m.value}_threshold`]),p=l(()=>o.ticket[m.value]),h=l(()=>p.value>v.value),k=l(()=>({delay:-p.value+"s",duration:v.value+"s"}));function y(e,f,t=""){const[w,...I]=f.split("|"),M=A(e,w,t);return M===t?M:I.reduce((N,S)=>le[S](N),M)}return(e,f)=>(s(),r("tr",{class:U(["personal-ticket",{overflow:h.value}])},[(s(!0),r(_,null,$(e.columns,([,t])=>(s(),r("td",{key:t},[t==="meta.icon"?(s(),g(x,{key:0,icon:y(e.ticket,t,"mdi-help"),color:"white"},null,8,["icon"])):(s(),r("span",{key:1,innerHTML:C(i).renderInline(y(e.ticket,t,"-"))},null,8,re))]))),128))],2))}}),ie=L(ue,[["__scopeId","data-v-9ff55c8d"]]),ce={class:"text-xl leading-tight font-semibold text-gray-800"},de=B({__name:"Personal",props:{layout:{default:"default"},operator:{},tickets:{},columns:{}},setup(d){const o=d,i=P(),m=l(()=>R(Y)),a=l(()=>R(Z)),v=J(ee),p=l(()=>m.value.with("tickets",e=>e.with("category").orderBy(i.value,"desc")).first());E(()=>{v.listen(K.PropsInvalidated,()=>T.reload()).listen(n.Created,a.value.create).listen(n.Closed,a.value.close).listen(n.Bound,a.value.bind).listen(n.Accepted,a.value.accept).listen(n.Unbound,a.value.unbind).listen(n.CategoryChanged,a.value.changeCategory).listen(n.MetaValueSet,a.value.setMetaValue).listen(n.MetaValuesMerged,a.value.mergeMetaValues).listen(n.MetricsAdjusted,a.value.adjustMetrics)});function h(){m.value.fresh(o.operator),a.value.fresh(o.tickets)}const k=T.on("navigate",h),y=T.on("success",h);return F(()=>{k(),y()}),(e,f)=>(s(),r(_,null,[c(C(H),{title:e.$t("personal")},null,8,["title"]),(s(),g(z(`${e.layout}-layout`),null,{header:u(()=>[V("h2",ce,b(e.$t("personal")),1)]),default:u(()=>[V("div",null,[c(ae,{fluid:""},{default:u(()=>[c(se,null,{default:u(()=>[c(oe,{offset:"10",cols:"2"},{default:u(()=>[c(Q,{modelValue:C(i),"onUpdate:modelValue":f[0]||(f[0]=t=>q(i)?i.value=t:null),"false-value":"weight","true-value":"duration","prepend-icon":"mdi-weight","append-icon":"mdi-clock",class:"d-flex justify-end"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),p.value?(s(),g(ne,{key:0,"fixed-header":"",density:"compact",class:"personal-monitor"},{default:u(()=>[V("thead",null,[V("tr",null,[(s(!0),r(_,null,$(e.columns,([t,w])=>(s(),r("th",{key:w},b(t),1))),128))])]),c(C(te),{tag:"tbody",name:"ticket-pool"},{default:u(()=>[(s(!0),r(_,null,$(p.value.tickets,t=>(s(),g(ie,{key:t.uuid,ticket:t,columns:e.columns},null,8,["ticket","columns"]))),128))]),_:1})]),_:1})):W("",!0)])]),_:1}))],64))}}),ge=L(de,[["__scopeId","data-v-ae86cca2"]]);export{ge as default};
//# sourceMappingURL=Personal-B45e0JQN.js.map
