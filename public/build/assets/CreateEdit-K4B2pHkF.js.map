{"version":3,"file":"CreateEdit-K4B2pHkF.js","sources":["../../../resources/js/composables/useDynamicComponent.ts","../../../resources/js/pages/Factor/CreateEdit.vue"],"sourcesContent":["import { shallowRef, inject, onBeforeMount, DefineComponent } from \"vue\";\n\ntype PageResolver = (name: string) => DefineComponent | Promise<DefineComponent>;\n\nexport function useDynamicComponent(name: string | null) {\n    const component = shallowRef<DefineComponent | null>(null);\n    const resolveComponent = inject<PageResolver>(\"resolveComponent\");\n\n    onBeforeMount(async () => {\n        if (name && resolveComponent) {\n            component.value = await resolveComponent(name);\n        }\n    });\n\n    return component;\n}\n","<template>\n    <Head :title=\"$t(factor ? 'edit_factor' : 'new_factor')\" />\n\n    <DefaultLayout>\n        <template #header>\n            <h2 class=\"text-xl leading-tight font-semibold text-gray-800\">\n                {{ $t(factor ? \"edit_factor\" : \"new_factor\") }}\n            </h2>\n        </template>\n\n        <div>\n            <v-form @submit.prevent=\"submit\">\n                <v-container>\n                    <v-row>\n                        <v-col cols=\"12\" md=\"12\">\n                            <v-checkbox v-model=\"form.active\" :label=\"$t('active')\" />\n                        </v-col>\n                    </v-row>\n                    <v-row>\n                        <v-col cols=\"12\" md=\"12\">\n                            <v-text-field\n                                :model-value=\"factorTypeName\"\n                                :label=\"$t('factor_type')\"\n                                :error-messages=\"errors.type\"\n                                readonly\n                            />\n                            <input v-model=\"form.type\" type=\"hidden\" />\n                        </v-col>\n                    </v-row>\n                    <v-row>\n                        <v-col cols=\"12\" md=\"12\">\n                            <v-text-field\n                                v-model=\"form.name\"\n                                maxlength=\"255\"\n                                :label=\"$t('name')\"\n                                :placeholder=\"factorTypeName\"\n                                :persistent-placeholder=\"!!factorTypeName.length\"\n                                :error-messages=\"errors.name\"\n                            />\n                        </v-col>\n                    </v-row>\n                    <v-row>\n                        <v-col cols=\"12\" md=\"12\">\n                            <v-textarea\n                                v-model=\"form.description\"\n                                :label=\"$t('description')\"\n                                :error-messages=\"errors.description\"\n                            />\n                        </v-col>\n                    </v-row>\n                    <component :is=\"formComponent\" v-if=\"!!formComponent\" v-model=\"form.config\" :entries=\"entries\" />\n                    <v-row>\n                        <v-col cols=\"12\" md=\"12\">\n                            <v-btn type=\"submit\" color=\"primary\" class=\"mr-3\" :disabled=\"form.processing\">\n                                {{ $t(\"save\") }}\n                            </v-btn>\n                            <v-btn :to=\"route('ticket-allocator.factors.index')\" class=\"mr-3\">{{ $t(\"cancel\") }}</v-btn>\n                        </v-col>\n                    </v-row>\n                </v-container>\n            </v-form>\n        </div>\n    </DefaultLayout>\n</template>\n\n<script setup lang=\"ts\">\nimport DefaultLayout from \"@/layouts/Default.vue\";\nimport { Head, useForm } from \"@inertiajs/vue3\";\nimport type { Entry, Factor, FactorType } from \"@/types\";\nimport { route } from \"ziggy-js\";\nimport { computed } from \"vue\";\nimport { useDynamicComponent } from \"@/composables\";\n\nconst props = defineProps<{\n    factor?: Factor;\n    factorType?: FactorType;\n    entries: Entry[];\n    errors: Record<string, string>;\n}>();\n\nconst form = useForm({\n    active: !props.factor?.deleted_at,\n    type: props.factor?.type.alias ?? props.factorType?.alias ?? \"\",\n    name: props.factor?.display_name ?? \"\",\n    description: props.factor?.description ?? \"\",\n    config: props.factor?.config ?? [],\n});\n\nconst factorTypeName = computed(() => props.factor?.type.name ?? props.factorType?.name ?? \"\");\n\nconst formComponent = useDynamicComponent(props.factor?.type.component ?? props.factorType?.component ?? null);\n\nfunction submit() {\n    props.factor\n        ? form.put(route(\"ticket-allocator.factors.update\", props.factor.uuid))\n        : form.post(route(\"ticket-allocator.factors.store\"));\n}\n</script>\n"],"names":["useDynamicComponent","name","component","shallowRef","resolveComponent","inject","onBeforeMount","props","__props","form","useForm","factorTypeName","computed","formComponent","submit","route","_createVNode","_unref","Head","$t","factor","DefaultLayout","_createElementVNode","_hoisted_1","_toDisplayString","_component_v_form","_component_v_container","_component_v_row","_component_v_col","_component_v_checkbox","_cache","$event","_component_v_text_field","errors","_vModelText","_component_v_textarea","_openBlock","_createBlock","_resolveDynamicComponent","entries","_component_v_btn"],"mappings":"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"}