import{a7 as N,U as L,W as S,Y as a,Z as u,e as D,F as g,a5 as $,$ as C,a0 as U,a4 as w,f as r,ba as A,a6 as E,a8 as P,a9 as O,ah as T,ai as F,c as d,aj as H,_ as i,d as V,ae as q,a2 as x,a1 as z,ac as G,am as B}from"./app-POup2_xr.js";import{M as W,a as Y,c as R,h as Z,C as J,T as n,V as K,n as Q,j as X,l as ee}from"./VSwitch-DPWrlqUu.js";import{T as te}from"./TransitionGroup-BH3Zc0TO.js";import{V as ae}from"./VContainer-BwDd_Ctb.js";import{V as se,a as oe}from"./VRow-k4PKPedO.js";import{V as ne}from"./VTable-6h_e2YsX.js";import"./VInput-B7tJStf1.js";import"./VSelectionControl-TCGzUcV4.js";/* empty css              */const le={timestamp:s=>{const o=N(s);return o.isBefore(Date.now(),"day")?`${o.format("L LT")} (${o.fromNow()})`:`${o.format("LT")} (${o.fromNow()})`}},re=["innerHTML"],ue=L({__name:"PersonalTicket",props:{ticket:{},columns:{}},setup(s){S(l=>({v37d8060d:y.value.delay,v16ef866c:y.value.duration}));const o=s,c=new W({linkify:!0}).use(Y),m=R(),t=r(()=>E().props.options),v=r(()=>t.value[`${m.value}_threshold`]),p=r(()=>o.ticket[m.value]),h=r(()=>p.value>v.value),y=r(()=>({delay:-p.value+"s",duration:v.value+"s"}));function k(l,f,e=""){const[_,...b]=f.split("|"),M=A(l,_,e);return M===e?M:b.reduce((j,I)=>le[I](j),M)}return(l,f)=>(a(),u("tr",{class:D(["personal-ticket",{overflow:h.value}])},[(a(!0),u(g,null,$(s.columns,([,e])=>(a(),u("td",{key:e},[e==="meta.icon"?(a(),C(U,{key:0,icon:k(s.ticket,e,"mdi-help"),color:"white"},null,8,["icon"])):(a(),u("span",{key:1,innerHTML:w(c).renderInline(k(s.ticket,e,"-"))},null,8,re))]))),128))],2))}}),ie=P(ue,[["__scopeId","data-v-9ff55c8d"]]),ce={class:"text-xl leading-tight font-semibold text-gray-800"},de=L({__name:"Personal",props:{layout:{default:"default"},operator:{},tickets:{},columns:{}},setup(s){const o=s,c=R(),m=r(()=>B(X)),t=r(()=>B(ee)),v=Z(Q),p=r(()=>m.value.with("tickets",l=>l.with("category").orderBy(c.value,"desc")).first());O(()=>{v.listen(J.PropsInvalidated,()=>T.reload()).listen(n.Created,t.value.create).listen(n.Closed,t.value.close).listen(n.Bound,t.value.bind).listen(n.Accepted,t.value.accept).listen(n.Unbound,t.value.unbind).listen(n.CategoryChanged,t.value.changeCategory).listen(n.MetaValueSet,t.value.setMetaValue).listen(n.MetaValuesMerged,t.value.mergeMetaValues).listen(n.MetricsAdjusted,t.value.adjustMetrics)});function h(){m.value.fresh(o.operator),t.value.fresh(o.tickets)}const y=T.on("navigate",h),k=T.on("success",h);return F(()=>{y(),k()}),(l,f)=>(a(),u(g,null,[d(w(H),{title:l.$t("personal")},null,8,["title"]),(a(),C(G(`${s.layout}-layout`),null,{header:i(()=>[V("h2",ce,x(l.$t("personal")),1)]),default:i(()=>[V("div",null,[d(ae,{fluid:""},{default:i(()=>[d(se,null,{default:i(()=>[d(oe,{offset:"10",cols:"2"},{default:i(()=>[d(K,{modelValue:w(c),"onUpdate:modelValue":f[0]||(f[0]=e=>q(c)?c.value=e:null),"false-value":"weight","true-value":"duration","prepend-icon":"mdi-weight","append-icon":"mdi-clock",class:"d-flex justify-end"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),p.value?(a(),C(ne,{key:0,"fixed-header":"",density:"compact",class:"personal-monitor"},{default:i(()=>[V("thead",null,[V("tr",null,[(a(!0),u(g,null,$(s.columns,([e,_])=>(a(),u("th",{key:_},x(e),1))),128))])]),d(w(te),{tag:"tbody",name:"ticket-pool"},{default:i(()=>[(a(!0),u(g,null,$(p.value.tickets,e=>(a(),C(ie,{key:e.uuid,ticket:e,columns:s.columns},null,8,["ticket","columns"]))),128))]),_:1})]),_:1})):z("",!0)])]),_:1}))],64))}}),Ce=P(de,[["__scopeId","data-v-ae86cca2"]]);export{Ce as default};
//# sourceMappingURL=Personal-C3PNP_aR.js.map
