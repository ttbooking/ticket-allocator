{"version":3,"file":"Dashboard-qM2AFx4z.js","sources":["../../../node_modules/vuetify/lib/directives/touch/index.mjs","../../../node_modules/vuetify/lib/components/VWindow/VWindow.mjs","../../../node_modules/vuetify/lib/components/VWindow/VWindowItem.mjs","../../../node_modules/vuetify/lib/components/VTabs/shared.mjs","../../../node_modules/vuetify/lib/components/VTabs/VTab.mjs","../../../node_modules/vuetify/lib/components/VTabs/VTabsWindow.mjs","../../../node_modules/vuetify/lib/components/VTabs/VTabsWindowItem.mjs","../../../node_modules/vuetify/lib/components/VTabs/VTabs.mjs","../../../resources/js/composables/useDragAndDrop.ts","../../../resources/js/composables/useDropZone.ts","../../../resources/js/components/Ticket.vue","../../../resources/js/components/TicketPool.vue","../../../resources/js/api/useSupervisorApi.ts","../../../resources/js/components/TicketRow.vue","../../../resources/js/components/OperatorRow.vue","../../../node_modules/pinia-orm/dist/helpers.mjs","../../../resources/js/pages/Dashboard.vue"],"sourcesContent":["// Utilities\nimport { keys } from \"../../util/index.mjs\"; // Types\nconst handleGesture = wrapper => {\n  const {\n    touchstartX,\n    touchendX,\n    touchstartY,\n    touchendY\n  } = wrapper;\n  const dirRatio = 0.5;\n  const minDistance = 16;\n  wrapper.offsetX = touchendX - touchstartX;\n  wrapper.offsetY = touchendY - touchstartY;\n  if (Math.abs(wrapper.offsetY) < dirRatio * Math.abs(wrapper.offsetX)) {\n    wrapper.left && touchendX < touchstartX - minDistance && wrapper.left(wrapper);\n    wrapper.right && touchendX > touchstartX + minDistance && wrapper.right(wrapper);\n  }\n  if (Math.abs(wrapper.offsetX) < dirRatio * Math.abs(wrapper.offsetY)) {\n    wrapper.up && touchendY < touchstartY - minDistance && wrapper.up(wrapper);\n    wrapper.down && touchendY > touchstartY + minDistance && wrapper.down(wrapper);\n  }\n};\nfunction touchstart(event, wrapper) {\n  const touch = event.changedTouches[0];\n  wrapper.touchstartX = touch.clientX;\n  wrapper.touchstartY = touch.clientY;\n  wrapper.start?.({\n    originalEvent: event,\n    ...wrapper\n  });\n}\nfunction touchend(event, wrapper) {\n  const touch = event.changedTouches[0];\n  wrapper.touchendX = touch.clientX;\n  wrapper.touchendY = touch.clientY;\n  wrapper.end?.({\n    originalEvent: event,\n    ...wrapper\n  });\n  handleGesture(wrapper);\n}\nfunction touchmove(event, wrapper) {\n  const touch = event.changedTouches[0];\n  wrapper.touchmoveX = touch.clientX;\n  wrapper.touchmoveY = touch.clientY;\n  wrapper.move?.({\n    originalEvent: event,\n    ...wrapper\n  });\n}\nfunction createHandlers() {\n  let value = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n  const wrapper = {\n    touchstartX: 0,\n    touchstartY: 0,\n    touchendX: 0,\n    touchendY: 0,\n    touchmoveX: 0,\n    touchmoveY: 0,\n    offsetX: 0,\n    offsetY: 0,\n    left: value.left,\n    right: value.right,\n    up: value.up,\n    down: value.down,\n    start: value.start,\n    move: value.move,\n    end: value.end\n  };\n  return {\n    touchstart: e => touchstart(e, wrapper),\n    touchend: e => touchend(e, wrapper),\n    touchmove: e => touchmove(e, wrapper)\n  };\n}\nfunction mounted(el, binding) {\n  const value = binding.value;\n  const target = value?.parent ? el.parentElement : el;\n  const options = value?.options ?? {\n    passive: true\n  };\n  const uid = binding.instance?.$.uid; // TODO: use custom uid generator\n\n  if (!target || !uid) return;\n  const handlers = createHandlers(binding.value);\n  target._touchHandlers = target._touchHandlers ?? Object.create(null);\n  target._touchHandlers[uid] = handlers;\n  keys(handlers).forEach(eventName => {\n    target.addEventListener(eventName, handlers[eventName], options);\n  });\n}\nfunction unmounted(el, binding) {\n  const target = binding.value?.parent ? el.parentElement : el;\n  const uid = binding.instance?.$.uid;\n  if (!target?._touchHandlers || !uid) return;\n  const handlers = target._touchHandlers[uid];\n  keys(handlers).forEach(eventName => {\n    target.removeEventListener(eventName, handlers[eventName]);\n  });\n  delete target._touchHandlers[uid];\n}\nexport const Touch = {\n  mounted,\n  unmounted\n};\nexport default Touch;\n//# sourceMappingURL=index.mjs.map","import { withDirectives as _withDirectives, resolveDirective as _resolveDirective, createVNode as _createVNode } from \"vue\";\n// Styles\nimport \"./VWindow.css\";\n\n// Components\nimport { VBtn } from \"../VBtn/index.mjs\"; // Composables\nimport { makeComponentProps } from \"../../composables/component.mjs\";\nimport { useGroup } from \"../../composables/group.mjs\";\nimport { useLocale, useRtl } from \"../../composables/locale.mjs\";\nimport { makeTagProps } from \"../../composables/tag.mjs\";\nimport { makeThemeProps, provideTheme } from \"../../composables/theme.mjs\"; // Directives\nimport { Touch } from \"../../directives/touch/index.mjs\"; // Utilities\nimport { computed, provide, ref, shallowRef, watch } from 'vue';\nimport { genericComponent, propsFactory, useRender } from \"../../util/index.mjs\"; // Types\nexport const VWindowSymbol = Symbol.for('vuetify:v-window');\nexport const VWindowGroupSymbol = Symbol.for('vuetify:v-window-group');\nexport const makeVWindowProps = propsFactory({\n  continuous: Boolean,\n  nextIcon: {\n    type: [Boolean, String, Function, Object],\n    default: '$next'\n  },\n  prevIcon: {\n    type: [Boolean, String, Function, Object],\n    default: '$prev'\n  },\n  reverse: Boolean,\n  showArrows: {\n    type: [Boolean, String],\n    validator: v => typeof v === 'boolean' || v === 'hover'\n  },\n  touch: {\n    type: [Object, Boolean],\n    default: undefined\n  },\n  direction: {\n    type: String,\n    default: 'horizontal'\n  },\n  modelValue: null,\n  disabled: Boolean,\n  selectedClass: {\n    type: String,\n    default: 'v-window-item--active'\n  },\n  // TODO: mandatory should probably not be exposed but do this for now\n  mandatory: {\n    type: [Boolean, String],\n    default: 'force'\n  },\n  ...makeComponentProps(),\n  ...makeTagProps(),\n  ...makeThemeProps()\n}, 'VWindow');\nexport const VWindow = genericComponent()({\n  name: 'VWindow',\n  directives: {\n    Touch\n  },\n  props: makeVWindowProps(),\n  emits: {\n    'update:modelValue': value => true\n  },\n  setup(props, _ref) {\n    let {\n      slots\n    } = _ref;\n    const {\n      themeClasses\n    } = provideTheme(props);\n    const {\n      isRtl\n    } = useRtl();\n    const {\n      t\n    } = useLocale();\n    const group = useGroup(props, VWindowGroupSymbol);\n    const rootRef = ref();\n    const isRtlReverse = computed(() => isRtl.value ? !props.reverse : props.reverse);\n    const isReversed = shallowRef(false);\n    const transition = computed(() => {\n      const axis = props.direction === 'vertical' ? 'y' : 'x';\n      const reverse = isRtlReverse.value ? !isReversed.value : isReversed.value;\n      const direction = reverse ? '-reverse' : '';\n      return `v-window-${axis}${direction}-transition`;\n    });\n    const transitionCount = shallowRef(0);\n    const transitionHeight = ref(undefined);\n    const activeIndex = computed(() => {\n      return group.items.value.findIndex(item => group.selected.value.includes(item.id));\n    });\n    watch(activeIndex, (newVal, oldVal) => {\n      const itemsLength = group.items.value.length;\n      const lastIndex = itemsLength - 1;\n      if (itemsLength <= 2) {\n        isReversed.value = newVal < oldVal;\n      } else if (newVal === lastIndex && oldVal === 0) {\n        isReversed.value = true;\n      } else if (newVal === 0 && oldVal === lastIndex) {\n        isReversed.value = false;\n      } else {\n        isReversed.value = newVal < oldVal;\n      }\n    });\n    provide(VWindowSymbol, {\n      transition,\n      isReversed,\n      transitionCount,\n      transitionHeight,\n      rootRef\n    });\n    const canMoveBack = computed(() => props.continuous || activeIndex.value !== 0);\n    const canMoveForward = computed(() => props.continuous || activeIndex.value !== group.items.value.length - 1);\n    function prev() {\n      canMoveBack.value && group.prev();\n    }\n    function next() {\n      canMoveForward.value && group.next();\n    }\n    const arrows = computed(() => {\n      const arrows = [];\n      const prevProps = {\n        icon: isRtl.value ? props.nextIcon : props.prevIcon,\n        class: `v-window__${isRtlReverse.value ? 'right' : 'left'}`,\n        onClick: group.prev,\n        'aria-label': t('$vuetify.carousel.prev')\n      };\n      arrows.push(canMoveBack.value ? slots.prev ? slots.prev({\n        props: prevProps\n      }) : _createVNode(VBtn, prevProps, null) : _createVNode(\"div\", null, null));\n      const nextProps = {\n        icon: isRtl.value ? props.prevIcon : props.nextIcon,\n        class: `v-window__${isRtlReverse.value ? 'left' : 'right'}`,\n        onClick: group.next,\n        'aria-label': t('$vuetify.carousel.next')\n      };\n      arrows.push(canMoveForward.value ? slots.next ? slots.next({\n        props: nextProps\n      }) : _createVNode(VBtn, nextProps, null) : _createVNode(\"div\", null, null));\n      return arrows;\n    });\n    const touchOptions = computed(() => {\n      if (props.touch === false) return props.touch;\n      const options = {\n        left: () => {\n          isRtlReverse.value ? prev() : next();\n        },\n        right: () => {\n          isRtlReverse.value ? next() : prev();\n        },\n        start: _ref2 => {\n          let {\n            originalEvent\n          } = _ref2;\n          originalEvent.stopPropagation();\n        }\n      };\n      return {\n        ...options,\n        ...(props.touch === true ? {} : props.touch)\n      };\n    });\n    useRender(() => _withDirectives(_createVNode(props.tag, {\n      \"ref\": rootRef,\n      \"class\": ['v-window', {\n        'v-window--show-arrows-on-hover': props.showArrows === 'hover'\n      }, themeClasses.value, props.class],\n      \"style\": props.style\n    }, {\n      default: () => [_createVNode(\"div\", {\n        \"class\": \"v-window__container\",\n        \"style\": {\n          height: transitionHeight.value\n        }\n      }, [slots.default?.({\n        group\n      }), props.showArrows !== false && _createVNode(\"div\", {\n        \"class\": \"v-window__controls\"\n      }, [arrows.value])]), slots.additional?.({\n        group\n      })]\n    }), [[_resolveDirective(\"touch\"), touchOptions.value]]));\n    return {\n      group\n    };\n  }\n});\n//# sourceMappingURL=VWindow.mjs.map","import { withDirectives as _withDirectives, createVNode as _createVNode, vShow as _vShow } from \"vue\";\n// Composables\nimport { makeComponentProps } from \"../../composables/component.mjs\";\nimport { makeGroupItemProps, useGroupItem } from \"../../composables/group.mjs\";\nimport { makeLazyProps, useLazy } from \"../../composables/lazy.mjs\";\nimport { useSsrBoot } from \"../../composables/ssrBoot.mjs\";\nimport { MaybeTransition } from \"../../composables/transition.mjs\"; // Directives\nimport Touch from \"../../directives/touch/index.mjs\"; // Utilities\nimport { computed, inject, nextTick, shallowRef } from 'vue';\nimport { convertToUnit, genericComponent, propsFactory, useRender } from \"../../util/index.mjs\"; // Types\nimport { VWindowGroupSymbol, VWindowSymbol } from \"./VWindow.mjs\";\nexport const makeVWindowItemProps = propsFactory({\n  reverseTransition: {\n    type: [Boolean, String],\n    default: undefined\n  },\n  transition: {\n    type: [Boolean, String],\n    default: undefined\n  },\n  ...makeComponentProps(),\n  ...makeGroupItemProps(),\n  ...makeLazyProps()\n}, 'VWindowItem');\nexport const VWindowItem = genericComponent()({\n  name: 'VWindowItem',\n  directives: {\n    Touch\n  },\n  props: makeVWindowItemProps(),\n  emits: {\n    'group:selected': val => true\n  },\n  setup(props, _ref) {\n    let {\n      slots\n    } = _ref;\n    const window = inject(VWindowSymbol);\n    const groupItem = useGroupItem(props, VWindowGroupSymbol);\n    const {\n      isBooted\n    } = useSsrBoot();\n    if (!window || !groupItem) throw new Error('[Vuetify] VWindowItem must be used inside VWindow');\n    const isTransitioning = shallowRef(false);\n    const hasTransition = computed(() => isBooted.value && (window.isReversed.value ? props.reverseTransition !== false : props.transition !== false));\n    function onAfterTransition() {\n      if (!isTransitioning.value || !window) {\n        return;\n      }\n\n      // Finalize transition state.\n      isTransitioning.value = false;\n      if (window.transitionCount.value > 0) {\n        window.transitionCount.value -= 1;\n\n        // Remove container height if we are out of transition.\n        if (window.transitionCount.value === 0) {\n          window.transitionHeight.value = undefined;\n        }\n      }\n    }\n    function onBeforeTransition() {\n      if (isTransitioning.value || !window) {\n        return;\n      }\n\n      // Initialize transition state here.\n      isTransitioning.value = true;\n      if (window.transitionCount.value === 0) {\n        // Set initial height for height transition.\n        window.transitionHeight.value = convertToUnit(window.rootRef.value?.clientHeight);\n      }\n      window.transitionCount.value += 1;\n    }\n    function onTransitionCancelled() {\n      onAfterTransition(); // This should have the same path as normal transition end.\n    }\n    function onEnterTransition(el) {\n      if (!isTransitioning.value) {\n        return;\n      }\n      nextTick(() => {\n        // Do not set height if no transition or cancelled.\n        if (!hasTransition.value || !isTransitioning.value || !window) {\n          return;\n        }\n\n        // Set transition target height.\n        window.transitionHeight.value = convertToUnit(el.clientHeight);\n      });\n    }\n    const transition = computed(() => {\n      const name = window.isReversed.value ? props.reverseTransition : props.transition;\n      return !hasTransition.value ? false : {\n        name: typeof name !== 'string' ? window.transition.value : name,\n        onBeforeEnter: onBeforeTransition,\n        onAfterEnter: onAfterTransition,\n        onEnterCancelled: onTransitionCancelled,\n        onBeforeLeave: onBeforeTransition,\n        onAfterLeave: onAfterTransition,\n        onLeaveCancelled: onTransitionCancelled,\n        onEnter: onEnterTransition\n      };\n    });\n    const {\n      hasContent\n    } = useLazy(props, groupItem.isSelected);\n    useRender(() => _createVNode(MaybeTransition, {\n      \"transition\": transition.value,\n      \"disabled\": !isBooted.value\n    }, {\n      default: () => [_withDirectives(_createVNode(\"div\", {\n        \"class\": ['v-window-item', groupItem.selectedClass.value, props.class],\n        \"style\": props.style\n      }, [hasContent.value && slots.default?.()]), [[_vShow, groupItem.isSelected.value]])]\n    }));\n    return {\n      groupItem\n    };\n  }\n});\n//# sourceMappingURL=VWindowItem.mjs.map","// Types\n\nexport const VTabsSymbol = Symbol.for('vuetify:v-tabs');\n//# sourceMappingURL=shared.mjs.map","import { mergeProps as _mergeProps, createVNode as _createVNode, Fragment as _Fragment } from \"vue\";\n// Styles\nimport \"./VTab.css\";\n\n// Components\nimport { makeVBtnProps, VBtn } from \"../VBtn/VBtn.mjs\"; // Composables\nimport { useTextColor } from \"../../composables/color.mjs\";\nimport { forwardRefs } from \"../../composables/forwardRefs.mjs\"; // Utilities\nimport { computed, ref } from 'vue';\nimport { VTabsSymbol } from \"./shared.mjs\";\nimport { animate, genericComponent, omit, propsFactory, standardEasing, useRender } from \"../../util/index.mjs\"; // Types\nexport const makeVTabProps = propsFactory({\n  fixed: Boolean,\n  sliderColor: String,\n  hideSlider: Boolean,\n  direction: {\n    type: String,\n    default: 'horizontal'\n  },\n  ...omit(makeVBtnProps({\n    selectedClass: 'v-tab--selected',\n    variant: 'text'\n  }), ['active', 'block', 'flat', 'location', 'position', 'symbol'])\n}, 'VTab');\nexport const VTab = genericComponent()({\n  name: 'VTab',\n  props: makeVTabProps(),\n  setup(props, _ref) {\n    let {\n      slots,\n      attrs\n    } = _ref;\n    const {\n      textColorClasses: sliderColorClasses,\n      textColorStyles: sliderColorStyles\n    } = useTextColor(props, 'sliderColor');\n    const rootEl = ref();\n    const sliderEl = ref();\n    const isHorizontal = computed(() => props.direction === 'horizontal');\n    const isSelected = computed(() => rootEl.value?.group?.isSelected.value ?? false);\n    function updateSlider(_ref2) {\n      let {\n        value\n      } = _ref2;\n      if (value) {\n        const prevEl = rootEl.value?.$el.parentElement?.querySelector('.v-tab--selected .v-tab__slider');\n        const nextEl = sliderEl.value;\n        if (!prevEl || !nextEl) return;\n        const color = getComputedStyle(prevEl).color;\n        const prevBox = prevEl.getBoundingClientRect();\n        const nextBox = nextEl.getBoundingClientRect();\n        const xy = isHorizontal.value ? 'x' : 'y';\n        const XY = isHorizontal.value ? 'X' : 'Y';\n        const rightBottom = isHorizontal.value ? 'right' : 'bottom';\n        const widthHeight = isHorizontal.value ? 'width' : 'height';\n        const prevPos = prevBox[xy];\n        const nextPos = nextBox[xy];\n        const delta = prevPos > nextPos ? prevBox[rightBottom] - nextBox[rightBottom] : prevBox[xy] - nextBox[xy];\n        const origin = Math.sign(delta) > 0 ? isHorizontal.value ? 'right' : 'bottom' : Math.sign(delta) < 0 ? isHorizontal.value ? 'left' : 'top' : 'center';\n        const size = Math.abs(delta) + (Math.sign(delta) < 0 ? prevBox[widthHeight] : nextBox[widthHeight]);\n        const scale = size / Math.max(prevBox[widthHeight], nextBox[widthHeight]) || 0;\n        const initialScale = prevBox[widthHeight] / nextBox[widthHeight] || 0;\n        const sigma = 1.5;\n        animate(nextEl, {\n          backgroundColor: [color, 'currentcolor'],\n          transform: [`translate${XY}(${delta}px) scale${XY}(${initialScale})`, `translate${XY}(${delta / sigma}px) scale${XY}(${(scale - 1) / sigma + 1})`, 'none'],\n          transformOrigin: Array(3).fill(origin)\n        }, {\n          duration: 225,\n          easing: standardEasing\n        });\n      }\n    }\n    useRender(() => {\n      const btnProps = VBtn.filterProps(props);\n      return _createVNode(VBtn, _mergeProps({\n        \"symbol\": VTabsSymbol,\n        \"ref\": rootEl,\n        \"class\": ['v-tab', props.class],\n        \"style\": props.style,\n        \"tabindex\": isSelected.value ? 0 : -1,\n        \"role\": \"tab\",\n        \"aria-selected\": String(isSelected.value),\n        \"active\": false\n      }, btnProps, attrs, {\n        \"block\": props.fixed,\n        \"maxWidth\": props.fixed ? 300 : undefined,\n        \"onGroup:selected\": updateSlider\n      }), {\n        ...slots,\n        default: () => _createVNode(_Fragment, null, [slots.default?.() ?? props.text, !props.hideSlider && _createVNode(\"div\", {\n          \"ref\": sliderEl,\n          \"class\": ['v-tab__slider', sliderColorClasses.value],\n          \"style\": sliderColorStyles.value\n        }, null)])\n      });\n    });\n    return forwardRefs({}, rootEl);\n  }\n});\n//# sourceMappingURL=VTab.mjs.map","import { createVNode as _createVNode, mergeProps as _mergeProps, resolveDirective as _resolveDirective } from \"vue\";\n// Components\nimport { makeVWindowProps, VWindow } from \"../VWindow/VWindow.mjs\"; // Composables\nimport { useProxiedModel } from \"../../composables/proxiedModel.mjs\"; // Utilities\nimport { computed, inject } from 'vue';\nimport { genericComponent, omit, propsFactory, useRender } from \"../../util/index.mjs\"; // Types\nimport { VTabsSymbol } from \"./shared.mjs\";\nexport const makeVTabsWindowProps = propsFactory({\n  ...omit(makeVWindowProps(), ['continuous', 'nextIcon', 'prevIcon', 'showArrows', 'touch', 'mandatory'])\n}, 'VTabsWindow');\nexport const VTabsWindow = genericComponent()({\n  name: 'VTabsWindow',\n  props: makeVTabsWindowProps(),\n  emits: {\n    'update:modelValue': v => true\n  },\n  setup(props, _ref) {\n    let {\n      slots\n    } = _ref;\n    const group = inject(VTabsSymbol, null);\n    const _model = useProxiedModel(props, 'modelValue');\n    const model = computed({\n      get() {\n        // Always return modelValue if defined\n        // or if not within a VTabs group\n        if (_model.value != null || !group) return _model.value;\n\n        // If inside of a VTabs, find the currently selected\n        // item by id. Item value may be assigned by its index\n        return group.items.value.find(item => group.selected.value.includes(item.id))?.value;\n      },\n      set(val) {\n        _model.value = val;\n      }\n    });\n    useRender(() => {\n      const windowProps = VWindow.filterProps(props);\n      return _createVNode(VWindow, _mergeProps({\n        \"_as\": \"VTabsWindow\"\n      }, windowProps, {\n        \"modelValue\": model.value,\n        \"onUpdate:modelValue\": $event => model.value = $event,\n        \"class\": ['v-tabs-window', props.class],\n        \"style\": props.style,\n        \"mandatory\": false,\n        \"touch\": false\n      }), slots);\n    });\n    return {};\n  }\n});\n//# sourceMappingURL=VTabsWindow.mjs.map","import { createVNode as _createVNode, mergeProps as _mergeProps, resolveDirective as _resolveDirective } from \"vue\";\n// Components\nimport { makeVWindowItemProps, VWindowItem } from \"../VWindow/VWindowItem.mjs\"; // Utilities\nimport { genericComponent, propsFactory, useRender } from \"../../util/index.mjs\";\nexport const makeVTabsWindowItemProps = propsFactory({\n  ...makeVWindowItemProps()\n}, 'VTabsWindowItem');\nexport const VTabsWindowItem = genericComponent()({\n  name: 'VTabsWindowItem',\n  props: makeVTabsWindowItemProps(),\n  setup(props, _ref) {\n    let {\n      slots\n    } = _ref;\n    useRender(() => {\n      const windowItemProps = VWindowItem.filterProps(props);\n      return _createVNode(VWindowItem, _mergeProps({\n        \"_as\": \"VTabsWindowItem\"\n      }, windowItemProps, {\n        \"class\": ['v-tabs-window-item', props.class],\n        \"style\": props.style\n      }), slots);\n    });\n    return {};\n  }\n});\n//# sourceMappingURL=VTabsWindowItem.mjs.map","import { createVNode as _createVNode, mergeProps as _mergeProps, resolveDirective as _resolveDirective, Fragment as _Fragment } from \"vue\";\n// Styles\nimport \"./VTabs.css\";\n\n// Components\nimport { VTab } from \"./VTab.mjs\";\nimport { VTabsWindow } from \"./VTabsWindow.mjs\";\nimport { VTabsWindowItem } from \"./VTabsWindowItem.mjs\";\nimport { makeVSlideGroupProps, VSlideGroup } from \"../VSlideGroup/VSlideGroup.mjs\"; // Composables\nimport { useBackgroundColor } from \"../../composables/color.mjs\";\nimport { provideDefaults } from \"../../composables/defaults.mjs\";\nimport { makeDensityProps, useDensity } from \"../../composables/density.mjs\";\nimport { useProxiedModel } from \"../../composables/proxiedModel.mjs\";\nimport { useScopeId } from \"../../composables/scopeId.mjs\";\nimport { makeTagProps } from \"../../composables/tag.mjs\"; // Utilities\nimport { computed, toRef } from 'vue';\nimport { convertToUnit, genericComponent, isObject, propsFactory, useRender } from \"../../util/index.mjs\"; // Types\nimport { VTabsSymbol } from \"./shared.mjs\";\nfunction parseItems(items) {\n  if (!items) return [];\n  return items.map(item => {\n    if (!isObject(item)) return {\n      text: item,\n      value: item\n    };\n    return item;\n  });\n}\nexport const makeVTabsProps = propsFactory({\n  alignTabs: {\n    type: String,\n    default: 'start'\n  },\n  color: String,\n  fixedTabs: Boolean,\n  items: {\n    type: Array,\n    default: () => []\n  },\n  stacked: Boolean,\n  bgColor: String,\n  grow: Boolean,\n  height: {\n    type: [Number, String],\n    default: undefined\n  },\n  hideSlider: Boolean,\n  sliderColor: String,\n  ...makeVSlideGroupProps({\n    mandatory: 'force',\n    selectedClass: 'v-tab-item--selected'\n  }),\n  ...makeDensityProps(),\n  ...makeTagProps()\n}, 'VTabs');\nexport const VTabs = genericComponent()({\n  name: 'VTabs',\n  props: makeVTabsProps(),\n  emits: {\n    'update:modelValue': v => true\n  },\n  setup(props, _ref) {\n    let {\n      attrs,\n      slots\n    } = _ref;\n    const model = useProxiedModel(props, 'modelValue');\n    const items = computed(() => parseItems(props.items));\n    const {\n      densityClasses\n    } = useDensity(props);\n    const {\n      backgroundColorClasses,\n      backgroundColorStyles\n    } = useBackgroundColor(toRef(props, 'bgColor'));\n    const {\n      scopeId\n    } = useScopeId();\n    provideDefaults({\n      VTab: {\n        color: toRef(props, 'color'),\n        direction: toRef(props, 'direction'),\n        stacked: toRef(props, 'stacked'),\n        fixed: toRef(props, 'fixedTabs'),\n        sliderColor: toRef(props, 'sliderColor'),\n        hideSlider: toRef(props, 'hideSlider')\n      }\n    });\n    useRender(() => {\n      const slideGroupProps = VSlideGroup.filterProps(props);\n      const hasWindow = !!(slots.window || props.items.length > 0);\n      return _createVNode(_Fragment, null, [_createVNode(VSlideGroup, _mergeProps(slideGroupProps, {\n        \"modelValue\": model.value,\n        \"onUpdate:modelValue\": $event => model.value = $event,\n        \"class\": ['v-tabs', `v-tabs--${props.direction}`, `v-tabs--align-tabs-${props.alignTabs}`, {\n          'v-tabs--fixed-tabs': props.fixedTabs,\n          'v-tabs--grow': props.grow,\n          'v-tabs--stacked': props.stacked\n        }, densityClasses.value, backgroundColorClasses.value, props.class],\n        \"style\": [{\n          '--v-tabs-height': convertToUnit(props.height)\n        }, backgroundColorStyles.value, props.style],\n        \"role\": \"tablist\",\n        \"symbol\": VTabsSymbol\n      }, scopeId, attrs), {\n        default: () => [slots.default?.() ?? items.value.map(item => slots.tab?.({\n          item\n        }) ?? _createVNode(VTab, _mergeProps(item, {\n          \"key\": item.text,\n          \"value\": item.value\n        }), {\n          default: slots[`tab.${item.value}`] ? () => slots[`tab.${item.value}`]?.({\n            item\n          }) : undefined\n        }))]\n      }), hasWindow && _createVNode(VTabsWindow, _mergeProps({\n        \"modelValue\": model.value,\n        \"onUpdate:modelValue\": $event => model.value = $event,\n        \"key\": \"tabs-window\"\n      }, scopeId), {\n        default: () => [items.value.map(item => slots.item?.({\n          item\n        }) ?? _createVNode(VTabsWindowItem, {\n          \"value\": item.value\n        }, {\n          default: () => slots[`item.${item.value}`]?.({\n            item\n          })\n        })), slots.window?.()]\n      })]);\n    });\n    return {};\n  }\n});\n//# sourceMappingURL=VTabs.mjs.map","import { ref } from \"vue\";\nimport type { MaybeRefOrGetter } from \"@vueuse/core\";\nimport { useEventListener } from \"@vueuse/core\";\n\nexport type DragStartHandler = (element: HTMLElement, dataTransfer: DataTransfer | null) => void;\n\nexport function useDragAndDrop(\n    target: MaybeRefOrGetter<HTMLElement | null | undefined>,\n    onDragStart?: DragStartHandler | string,\n) {\n    const element = ref<HTMLElement | null | undefined>();\n\n    useEventListener<DragEvent>(target, \"dragstart\", (event) => {\n        element.value = event.target as HTMLElement;\n\n        if (typeof onDragStart === \"string\") {\n            const entry = onDragStart;\n            onDragStart = (element, dataTransfer) => {\n                dataTransfer?.setData(\"text/plain\", element.dataset[entry] ?? \"\");\n            };\n        }\n\n        onDragStart?.(element.value, event.dataTransfer);\n    });\n\n    useEventListener<DragEvent>(target, \"dragend\", () => {\n        element.value = null;\n    });\n\n    return {\n        element,\n    };\n}\n\nexport type UseDragAndDropReturn = ReturnType<typeof useDragAndDrop>;\n","import { ref } from \"vue\";\nimport type { MaybeRefOrGetter } from \"@vueuse/core\";\nimport { isClient, useEventListener } from \"@vueuse/core\";\n\n// export type DropHandler = <T extends DataTransfer | File[] = DataTransfer>(arg: T | null) => void\nexport type DropHandler = (arg: File[] | DataTransfer | null) => void;\nexport type FileDropHandler = (arg: File[] | null) => void;\nexport type DataDropHandler = (arg: DataTransfer | null) => void;\n\nexport function useDropZone(\n    target: MaybeRefOrGetter<HTMLElement | null | undefined>,\n    onDrop?: DataDropHandler,\n    filesOnly = true,\n) {\n    const isOverDropZone = ref(false);\n    let counter = 0;\n\n    if (isClient) {\n        useEventListener<DragEvent>(target, \"dragenter\", (event) => {\n            event.preventDefault();\n            counter++;\n            isOverDropZone.value = true;\n        });\n        useEventListener<DragEvent>(target, \"dragover\", (event) => {\n            event.preventDefault();\n        });\n        useEventListener<DragEvent>(target, \"dragleave\", (event) => {\n            event.preventDefault();\n            counter--;\n            if (counter === 0) isOverDropZone.value = false;\n        });\n        useEventListener<DragEvent>(target, \"drop\", (event) => {\n            event.preventDefault();\n            counter = 0;\n            isOverDropZone.value = false;\n            if (onDrop) {\n                if (filesOnly) {\n                    const files = Array.from(event.dataTransfer?.files ?? []);\n                    const onFileDrop = onDrop as FileDropHandler;\n                    onFileDrop(files.length === 0 ? null : files);\n                } else {\n                    const onDataDrop = onDrop as DataDropHandler;\n                    onDataDrop(event.dataTransfer);\n                }\n            }\n        });\n    }\n\n    return {\n        isOverDropZone,\n    };\n}\n\nexport type UseDropZoneReturn = ReturnType<typeof useDropZone>;\n","<template>\n    <div class=\"d-inline-block\">\n        <v-btn size=\"small\" class=\"ticket justify-start px-2\" :class=\"{ overflow }\" :ripple=\"false\" flat width=\"100\">\n            <v-icon v-if=\"ticket.meta?.icon\" :icon=\"ticket.meta?.icon ?? ''\" color=\"white\" />\n            <span class=\"text-white overflow-hidden\">\n                <span class=\"title inline-block relative\">{{ title() }}</span>\n            </span>\n            <v-overlay\n                open-on-click\n                activator=\"parent\"\n                location-strategy=\"connected\"\n                location=\"bottom center\"\n                origin=\"auto\"\n            >\n                <v-card width=\"500\" :prepend-icon=\"ticket.meta?.icon ?? ''\" :title=\"cardTitle\" :subtitle=\"cardSubtitle\">\n                    <v-tabs v-model=\"tab\">\n                        <v-tab value=\"properties\">{{ $t(\"properties\") }}</v-tab>\n                        <v-tab value=\"metrics\">{{ $t(\"metrics\") }}</v-tab>\n                        <v-tab value=\"details\">{{ $t(\"details\") }}</v-tab>\n                    </v-tabs>\n                    <v-card-text>\n                        <v-window v-model=\"tab\">\n                            <v-window-item value=\"properties\" class=\"prose\">\n                                <div v-if=\"typeof cardContent === 'string'\" v-html=\"md.render(cardContent)\"></div>\n                                <table v-else>\n                                    <tbody>\n                                        <tr v-for=\"[key, value] in cardContent\" :key=\"key\">\n                                            <th>{{ key }}</th>\n                                            <td v-html=\"md.renderInline(value)\"></td>\n                                        </tr>\n                                    </tbody>\n                                </table>\n                            </v-window-item>\n                            <v-window-item value=\"metrics\" class=\"prose\">\n                                <table>\n                                    <tbody>\n                                        <tr>\n                                            <th>{{ $t(\"issued_on\") }}</th>\n                                            <td>{{ createdAtInfo }}</td>\n                                        </tr>\n                                        <tr v-if=\"delayedUntil.isAfter($dayjs())\">\n                                            <th>{{ $t(\"delayed_until\") }}</th>\n                                            <td>{{ delayedUntilInfo }}</td>\n                                        </tr>\n                                        <tr v-if=\"boundAt\">\n                                            <th>{{ $t(\"bound_at\") }}</th>\n                                            <td>{{ boundAtInfo }}</td>\n                                        </tr>\n                                        <tr v-if=\"reservedUntil && reservedUntil.isAfter($dayjs())\">\n                                            <th>{{ $t(\"reserved_until\") }}</th>\n                                            <td>{{ reservedUntilInfo }}</td>\n                                        </tr>\n                                        <tr v-if=\"acceptedAt\">\n                                            <th>{{ $t(\"accepted_at\") }}</th>\n                                            <td>{{ acceptedAtInfo }}</td>\n                                        </tr>\n                                        <tr>\n                                            <th>{{ $t(\"current_weight\") }}</th>\n                                            <td>{{ currentWeightInfo }}</td>\n                                        </tr>\n                                        <tr>\n                                            <th>{{ $t(\"complexity\") }}</th>\n                                            <td>{{ ticket.complexity + \" \" + t(\"units\") }}</td>\n                                        </tr>\n                                    </tbody>\n                                </table>\n                            </v-window-item>\n                            <v-window-item value=\"details\" class=\"prose\">\n                                <table class=\"table-fixed\">\n                                    <thead>\n                                        <tr>\n                                            <th class=\"w-1/3\">{{ $t(\"factor\") }}</th>\n                                            <th class=\"text-center\">\n                                                <em class=\"metric\" :title=\"$t('initial_weight')\">W<sub>0</sub></em>\n                                            </th>\n                                            <th class=\"text-center\">\n                                                <em class=\"metric\" :title=\"$t('weight_increment')\">W<sub>i</sub></em>\n                                            </th>\n                                            <th class=\"text-center\">\n                                                <em class=\"metric\" :title=\"$t('complexity')\">C</em>\n                                            </th>\n                                            <th class=\"text-center\">\n                                                <em class=\"metric\" :title=\"$t('delay_sec')\">D</em>\n                                            </th>\n                                            <th class=\"text-center\">\n                                                <em class=\"metric\" :title=\"$t('reservation_sec')\">R</em>\n                                            </th>\n                                        </tr>\n                                    </thead>\n                                    <tbody>\n                                        <tr v-for=\"(adjustments, factorUuid) in ticket.metrics ?? {}\" :key=\"factorUuid\">\n                                            <th>{{ factors[factorUuid]?.name ?? $t(\"unknown\") }}</th>\n                                            <td class=\"text-right\">{{ adjustments.initial_weight ?? 0 }}</td>\n                                            <td class=\"text-right\">{{ adjustments.weight_increment ?? 0 }}</td>\n                                            <td class=\"text-right\">{{ adjustments.complexity ?? 0 }}</td>\n                                            <td class=\"text-right\">{{ adjustments.delay ?? 0 }}</td>\n                                            <td class=\"text-right\">{{ adjustments.reservation ?? 0 }}</td>\n                                        </tr>\n                                    </tbody>\n                                    <tfoot>\n                                        <tr>\n                                            <th>{{ $t(\"total\") }}</th>\n                                            <td class=\"text-right\">{{ ticket.initial_weight }}</td>\n                                            <td class=\"text-right\">{{ ticket.weight_increment }}</td>\n                                            <td class=\"text-right\">{{ ticket.complexity }}</td>\n                                            <td class=\"text-right\">{{ ticket.delay }}</td>\n                                            <td class=\"text-right\">{{ ticket.reservation }}</td>\n                                        </tr>\n                                    </tfoot>\n                                </table>\n                            </v-window-item>\n                        </v-window>\n                    </v-card-text>\n                </v-card>\n            </v-overlay>\n        </v-btn>\n    </div>\n</template>\n\n<script setup lang=\"ts\">\nimport { computed, ref } from \"vue\";\nimport { useI18n } from \"vue-i18n\";\nimport dayjs from \"dayjs\";\nimport MarkdownIt from \"markdown-it\";\nimport MarkdownItAttrs from \"markdown-it-attrs\";\nimport { usePage } from \"@inertiajs/vue3\";\nimport Ticket from \"@/models/Ticket\";\nimport { Factor, DisplayOptions } from \"@/types\";\nimport { useSharedOptions, useSharedDisplayMode } from \"@/shared\";\n\nconst props = defineProps<{\n    ticket: Ticket;\n}>();\n\nconst { t } = useI18n();\n\nconst factors = computed(() => usePage().props.factors as Record<string, Factor>);\n\nconst tab = ref(null);\n\nconst md = new MarkdownIt({ linkify: true }).use(MarkdownItAttrs);\n\nconst options = useSharedOptions();\nconst mode = useSharedDisplayMode();\n\nconst config = computed(() => usePage().props.options as DisplayOptions);\n\nconst createdAt = computed(() => dayjs(props.ticket.created_at));\n\nconst delay = computed(() => dayjs.duration(props.ticket.delay, \"s\"));\n\nconst delayedUntil = computed(() => createdAt.value.add(delay.value));\n\nconst boundAt = computed(() => (props.ticket.bound_at ? dayjs(props.ticket.bound_at) : null));\n\nconst reservation = computed(() => (props.ticket.reservation ? dayjs.duration(props.ticket.reservation, \"s\") : null));\n\nconst reservedUntil = computed(() =>\n    boundAt.value && reservation.value ? boundAt.value!.add(reservation.value!) : null,\n);\n\nconst acceptedAt = computed(() => (props.ticket.accepted_at ? dayjs(props.ticket.accepted_at) : null));\n\nconst createdAtInfo = computed(() => `${createdAt.value.format(\"lll\")} (${createdAt.value.fromNow()})`);\n\nconst delayedUntilInfo = computed(\n    () => `${delayedUntil.value.format(\"lll\")} (${t(\"time_left\", { time: delayedUntil.value.fromNow(true) })})`,\n);\n\nconst boundAtInfo = computed(() =>\n    boundAt.value ? `${boundAt.value!.format(\"lll\")} (${boundAt.value!.fromNow()})` : null,\n);\n\nconst reservedUntilInfo = computed(() =>\n    reservedUntil.value\n        ? `${reservedUntil.value!.format(\"lll\")} (${t(\"time_left\", { time: reservedUntil.value!.fromNow(true) })})`\n        : null,\n);\n\nconst acceptedAtInfo = computed(() =>\n    acceptedAt.value ? `${acceptedAt.value!.format(\"lll\")} (${acceptedAt.value!.fromNow()})` : null,\n);\n\nconst currentWeightInfo = computed(\n    () =>\n        `${compact(props.ticket.weight)} (${t(\"increment_per_second\", {\n            units: props.ticket.weight_increment.toString(),\n        })})`,\n);\n\nconst threshold = computed(() => config.value[`${mode.value}_threshold`]);\n\nconst position = computed(() => props.ticket[mode.value]);\n\nconst compact = (value: number) => (value < 100000 ? value : value.toExponential(1));\n\nconst categoryName = () => props.ticket.meta?.category_name ?? props.ticket.category?.name ?? \"\";\n\nconst categoryShort = () => props.ticket.meta?.category_short ?? props.ticket.category?.short ?? \"\";\n\nconst title = () => (options.altInfo ? props.ticket.meta?.title ?? categoryShort() : categoryShort());\n\nconst cardTitle = computed(() => props.ticket.meta?.card_title ?? \"Title\");\n\nconst cardSubtitle = computed(() => props.ticket.meta?.card_subtitle ?? categoryName());\n\nconst cardContent = computed(() => <Array<[string, string]>>(props.ticket.meta?.card_content as unknown) ?? []);\n\nconst overflow = computed(() => position.value > threshold.value);\n\nconst animation = computed(() => ({\n    delay: -position.value + \"s\",\n    duration: threshold.value + \"s\",\n}));\n</script>\n\n<style scoped>\n.ticket {\n    animation-delay: v-bind(\"animation.delay\");\n    animation-duration: v-bind(\"animation.duration\");\n}\n\n.ticket:deep(.v-btn__content) {\n    overflow: hidden;\n}\n\n.ticket:hover .title {\n    animation: 4s linear infinite alternate ticker;\n}\n\n@keyframes ticker {\n    0%,\n    25% {\n        left: 0;\n        transform: translateX(0%);\n    }\n    75%,\n    100% {\n        left: 100%;\n        transform: translateX(-100%);\n    }\n}\n\n.metric {\n    @apply border-b-[1px] border-dotted border-black cursor-help;\n}\n</style>\n","<template>\n    <TransGroup\n        ref=\"ticketPool\"\n        name=\"ticket-pool\"\n        class=\"@container tickets leading-8 !pt-[1px] !pb-[3px]\"\n        :css=\"animationEnabled\"\n        @mouseup=\"unlock\"\n    >\n        <TicketComponent\n            v-for=\"ticket in tickets\"\n            :key=\"ticket.uuid\"\n            :data-uuid=\"ticket.uuid\"\n            :ticket=\"ticket\"\n            draggable=\"true\"\n            class=\"mr-1\"\n            @mousedown.ctrl=\"lock\"\n        />\n    </TransGroup>\n</template>\n\n<script setup lang=\"ts\">\nimport { ref, computed, watch, onMounted } from \"vue\";\nimport { useMouse, usePointerLock } from \"@vueuse/core\";\nimport { useDragAndDrop } from \"@/composables\";\nimport { TransitionGroup as TransGroup } from \"@/components/TransitionGroup\";\nimport { default as TicketComponent } from \"@/components/Ticket.vue\";\nimport type { Collection } from \"pinia-orm\";\nimport Ticket from \"@/models/Ticket\";\n\nimport { useRepo } from \"pinia-orm\";\nimport TicketRepository from \"@/repositories/TicketRepository\";\n\ndefineProps<{\n    tickets: Collection<Ticket>;\n}>();\n\nconst ticketPool = ref<HTMLElement | null>(null);\nuseDragAndDrop(ticketPool, \"uuid\");\n\nconst { lock, unlock, element, triggerElement } = usePointerLock(ticketPool);\nconst { x } = useMouse({ type: \"movement\" });\n\nconst ticketRepo = computed(() => useRepo(TicketRepository));\n\nwatch([element, x], ([element, x]) => {\n    if (!element || !triggerElement.value) return;\n\n    const uuid = triggerElement.value.dataset.uuid as string;\n    //multiplier.value = Math.round(Math.min(Math.max(multiplier.value - y / 10, 1), 100));\n    //correction.value = Math.max(correction.value - x * multiplier.value, correction.value - props.ticket.weight);\n    /*if (x < 0) {\n        ticketRepo.value.incrementInitialWeight({ uuid, weightPoints: -x * 10 });\n    } else if (x > 0) {\n        ticketRepo.value.decrementInitialWeight({ uuid, weightPoints: x * 10 });\n    }*/\n});\n\nconst animationEnabled = ref(false);\n\nonMounted(() => {\n    setTimeout(() => (animationEnabled.value = true), 500);\n});\n</script>\n\n<style scoped>\n.ticket-pool-move {\n    transition: transform 0.5s ease-in-out;\n}\n\n.ticket-pool-enter-active {\n    transition: transform 1s ease-out;\n}\n\n.ticket-pool-enter-from {\n    transform: translateX(100cqw);\n}\n\n.ticket-pool-leave-active {\n    transition: opacity 0.5s;\n    position: absolute;\n}\n\n.ticket-pool-leave-to {\n    opacity: 0;\n}\n\n.tickets {\n    overflow: hidden;\n}\n.tickets.collapsed {\n    white-space: nowrap;\n    mask-image: linear-gradient(to right, black 85%, transparent);\n}\n</style>\n","import { route } from \"ziggy-js\";\n\nexport function useSupervisorApi() {\n    async function ready(operatorUuid: string, ready: boolean) {\n        return await window.axios.patch(route(\"ticket-allocator.operators.ready\", operatorUuid), { ready });\n    }\n\n    async function weight(ticketUuid: string, weightPoints: number) {\n        return await window.axios.patch(route(\"ticket-allocator.tickets.weight\", ticketUuid), {\n            weight_points: weightPoints,\n        });\n    }\n\n    async function handler(ticketUuid: string, operatorUuid?: string | null) {\n        return await window.axios.patch(route(\"ticket-allocator.tickets.handler\", ticketUuid), {\n            operator_uuid: operatorUuid ?? null,\n        });\n    }\n\n    async function close(ticketUuid: string) {\n        return await window.axios.delete(route(\"ticket-allocator.tickets.close\", ticketUuid));\n    }\n\n    return { ready, weight, handler, close };\n}\n","<template>\n    <tr ref=\"ticketRow\" class=\"ticket-row\" :class=\"{ dragover: isOverDropZone }\">\n        <component :is=\"cell\" class=\"status py-1\">\n            <slot name=\"status\" />\n        </component>\n\n        <component :is=\"cell\" class=\"name !pt-[6px] font-weight-bold\">\n            <slot name=\"name\" />\n        </component>\n\n        <component :is=\"cell\" class=\"load !pt-[6px] text-center\">\n            <slot name=\"load\">{{ tickets.length }}</slot\n            >/<slot name=\"load-max\">&infin;</slot>\n        </component>\n\n        <component :is=\"cell\" class=\"complexity !pt-[6px] text-center\">\n            <slot name=\"complexity\">{{ complexity }}</slot\n            >/<slot name=\"complexity-max\">&infin;</slot>\n        </component>\n\n        <TicketPool :tag=\"cell\" :tickets=\"tickets\" :class=\"{ collapsed }\" />\n\n        <component :is=\"cell\" class=\"more !pt-[2px] text-center\">\n            <v-btn size=\"x-small\" variant=\"tonal\" :icon=\"moreIcon\" @click=\"collapsed = !collapsed\" />\n        </component>\n    </tr>\n</template>\n\n<script setup lang=\"ts\">\nimport TicketPool from \"@/components/TicketPool.vue\";\nimport { computed, ref } from \"vue\";\nimport { useSupervisorApi } from \"@/api\";\nimport { useDropZone } from \"@/composables\";\nimport type { Collection } from \"pinia-orm\";\nimport Ticket from \"@/models/Ticket\";\n\nconst props = defineProps<{\n    tickets: Collection<Ticket>;\n    pool?: boolean;\n}>();\n\nlet collapsed = ref(false);\n\nconst cell = computed(() => (props.pool ? \"th\" : \"td\"));\n\nconst complexity = computed(() => props.tickets.reduce((n, { complexity }) => n + complexity, 0));\n\nconst moreIcon = computed(() => (collapsed.value ? \"mdi-chevron-down\" : \"mdi-chevron-up\"));\n\nconst api = useSupervisorApi();\n\nconst ticketRow = ref<HTMLElement | null>(null);\nconst { isOverDropZone } = useDropZone(\n    ticketRow,\n    async (dataTransfer) => {\n        const uuid = dataTransfer?.getData(\"text/plain\");\n        if (!uuid) throw new Error(\"Ticket UUID undefined.\");\n        const operatorUuid = ticketRow.value?.dataset.uuid;\n        return await api.handler(uuid, operatorUuid);\n    },\n    false,\n);\n</script>\n\n<style scoped>\n.ticket-row .status {\n    width: 2.2em;\n}\n.ticket-row .name {\n    width: 12em;\n}\n.ticket-row .load {\n    width: 5em;\n}\n.ticket-row .complexity {\n    width: 5em;\n}\n.ticket-row .more {\n    width: 4.8em;\n}\n.ticket-row.dragover {\n    background-color: #def2de !important;\n}\n</style>\n","<template>\n    <TicketRow :tickets=\"operator.tickets\" :data-uuid=\"operator.uuid\" class=\"operator\" :class=\"status\">\n        <template #status><v-icon icon=\"mdi-account\" @click=\"toggleReadiness\" /></template>\n        <template #load-max>{{ operator.ticket_limit ?? \"&infin;\" }}</template>\n        <template #complexity-max>{{ operator.complexity_limit ?? \"&infin;\" }}</template>\n        <template #name>{{ operator.name }}</template>\n    </TicketRow>\n</template>\n\n<script setup lang=\"ts\">\nimport TicketRow from \"@/components/TicketRow.vue\";\nimport { computed } from \"vue\";\nimport { useSupervisorApi } from \"@/api\";\nimport Operator from \"@/models/Operator\";\n\nconst props = defineProps<{\n    operator: Operator;\n}>();\n\nconst status = computed(() => ({\n    online: props.operator.online,\n    ready: props.operator.ready,\n    busy: !!props.operator.tickets?.length,\n    full: props.operator.ticket_limit !== null && props.operator.tickets?.length >= props.operator.ticket_limit,\n}));\n\nconst api = useSupervisorApi();\n\nconst toggleReadiness = async () => await api.ready(props.operator.uuid, !props.operator.ready);\n</script>\n\n<style scoped>\n.operator i {\n    color: #999;\n}\n.operator.online i {\n    color: #f44;\n}\n.operator.online.ready i {\n    color: #4f4;\n}\n.operator.online.ready.full i {\n    color: #fe4;\n}\n.operator:not(.online).busy {\n    background-color: #f2dede;\n}\n</style>\n","import { k as getValue, o as orderBy } from './shared/pinia-orm.1bd7d299.mjs';\n\nfunction useSum(models, field) {\n  return models.reduce((sum, item) => {\n    if (typeof item[field] === \"number\") {\n      sum += item[field];\n    }\n    return sum;\n  }, 0);\n}\n\nfunction usePluck(models, field) {\n  return models.map((model) => getValue(model, field)).filter((item) => item);\n}\n\nfunction useMax(models, field) {\n  const numbers = usePluck(models, field).filter((item) => typeof item === \"number\");\n  return numbers.length === 0 ? 0 : Math.max(...numbers);\n}\n\nfunction useMin(models, field) {\n  const numbers = usePluck(models, field).filter((item) => typeof item === \"number\");\n  return numbers.length === 0 ? 0 : Math.min(...numbers);\n}\n\nfunction useKeys(models) {\n  return models.map((model) => model[model.$getLocalKey()]);\n}\n\nfunction useGroupBy(models, fields) {\n  const grouped = {};\n  const props = Array.isArray(fields) ? fields : [fields];\n  models.forEach((model) => {\n    const key = props.length === 1 ? model[props[0]] : `[${props.map((field) => model[field]).toString()}]`;\n    grouped[key] = (grouped[key] || []).concat(model);\n  });\n  return grouped;\n}\n\nfunction useSortBy(collection, sort, flags) {\n  const directions = [];\n  const iteratees = [];\n  typeof sort === \"function\" && iteratees.push(sort) && directions.push(\"asc\");\n  Array.isArray(sort) && sort.forEach((item) => iteratees.push(item[0]) && directions.push(item[1]));\n  iteratees.length === 0 && iteratees.push(sort);\n  return orderBy(collection, iteratees, directions, flags);\n}\n\nfunction useCollect(models) {\n  return {\n    sum: (field) => useSum(models, field),\n    min: (field) => useMin(models, field),\n    max: (field) => useMax(models, field),\n    pluck: (field) => usePluck(models, field),\n    groupBy: (fields) => useGroupBy(models, fields),\n    sortBy: (sort, flags = \"SORT_REGULAR\") => useSortBy(models, sort, flags),\n    keys: () => useKeys(models)\n  };\n}\n\nexport { useCollect, useGroupBy, useKeys, useMax, useMin, usePluck, useSum };\n","<template>\n    <Head :title=\"$t('dashboard')\" />\n\n    <DefaultLayout>\n        <template #header>\n            <h2 class=\"font-semibold text-xl text-gray-800 leading-tight\">{{ $t(\"dashboard\") }}</h2>\n        </template>\n\n        <div>\n            <v-container fluid>\n                <v-row>\n                    <v-col>\n                        <v-btn-toggle v-model=\"options.all\" variant=\"plain\" multiple>\n                            <v-btn\n                                value=\"hide-empty\"\n                                :icon=\"options.hideEmpty ? 'mdi-eye-off-outline' : 'mdi-eye-outline'\"\n                            />\n                            <v-btn\n                                value=\"alt-info\"\n                                :icon=\"options.altInfo ? 'mdi-magnify-plus-outline' : 'mdi-magnify'\"\n                            />\n                            <v-btn\n                                value=\"unlocked\"\n                                :icon=\"options.unlocked ? 'mdi-lock-open-variant' : 'mdi-lock'\"\n                                color=\"red\"\n                                :variant=\"options.unlocked ? 'text' : 'plain'\"\n                            />\n                        </v-btn-toggle>\n                        <v-btn-group v-if=\"options.unlocked\" variant=\"plain\">\n                            <v-btn ref=\"closeTicket\" :icon=\"isOverDropZone ? 'mdi-delete-empty' : 'mdi-delete'\" />\n                            <v-btn icon=\"mdi-refresh\" />\n                        </v-btn-group>\n                    </v-col>\n                    <v-col cols=\"2\">\n                        <v-switch\n                            v-model=\"mode\"\n                            false-value=\"weight\"\n                            true-value=\"duration\"\n                            prepend-icon=\"mdi-weight\"\n                            append-icon=\"mdi-clock\"\n                            class=\"d-flex justify-end\"\n                        />\n                    </v-col>\n                </v-row>\n                <v-row>\n                    <v-col v-for=\"(items, matcher) in matchers\" :key=\"matcher\" cols=\"2\">\n                        <v-autocomplete\n                            v-model=\"filters[matcher]\"\n                            multiple\n                            clearable\n                            chips\n                            closable-chips\n                            :label=\"$t(matcher)\"\n                            :items=\"itemify(items)\"\n                        />\n                    </v-col>\n                </v-row>\n            </v-container>\n            <v-table fixed-header height=\"600px\" density=\"compact\" class=\"ticket-monitor\">\n                <thead class=\"align-top\">\n                    <TicketRow pool :tickets=\"sortedTickets\">\n                        <template #name>{{ $t(\"ticket_pool\") }}</template>\n                    </TicketRow>\n                </thead>\n                <TransGroup tag=\"tbody\" class=\"align-top\" name=\"operator-pool\">\n                    <OperatorRow v-for=\"operator in sortedOperators\" :key=\"operator.uuid\" :operator=\"operator\" />\n                </TransGroup>\n            </v-table>\n        </div>\n    </DefaultLayout>\n</template>\n\n<script setup lang=\"ts\">\nimport DefaultLayout from \"@/layouts/Default.vue\";\nimport { TransitionGroup as TransGroup } from \"@/components/TransitionGroup\";\nimport TicketRow from \"@/components/TicketRow.vue\";\nimport OperatorRow from \"@/components/OperatorRow.vue\";\nimport { Head, router } from \"@inertiajs/vue3\";\nimport { computed, ref, reactive, onMounted, onUnmounted } from \"vue\";\nimport { useSupervisorApi } from \"@/api\";\nimport { useDropZone, usePusherChannel } from \"@/composables\";\nimport type { Operator, Ticket, TicketCategory, Factor } from \"@/types\";\nimport { useSharedOptions, useSharedDisplayMode } from \"@/shared\";\nimport * as Events from \"@/types/events.d\";\n\nimport { useRepo } from \"pinia-orm\";\nimport { useCollect } from \"pinia-orm/helpers\";\nimport OperatorModel from \"@/models/Operator\";\nimport OperatorRepository from \"@/repositories/OperatorRepository\";\nimport TicketRepository from \"@/repositories/TicketRepository\";\nimport TicketCategoryRepository from \"@/models/TicketCategory\";\n\nconst props = defineProps<{\n    operators: Operator[];\n    tickets: Ticket[];\n    ticketCategories: TicketCategory[];\n    factors: Record<string, Factor>;\n    matchers: Record<string, Record<string, string | number>>;\n}>();\n\nconst options = useSharedOptions();\nconst mode = useSharedDisplayMode();\n\nconst operatorRepo = computed(() => useRepo(OperatorRepository));\nconst ticketRepo = computed(() => useRepo(TicketRepository));\nconst ticketCategoryRepo = computed(() => useRepo(TicketCategoryRepository));\nconst channel = usePusherChannel(Events.Channel);\n\nconst filters = reactive<Record<string, string[]>>({});\nconst metaFilter = (meta: Record<string, string> | null) => {\n    return Object.entries(filters).reduce<boolean>((passes, x) => {\n        const [filter, entries] = x;\n        const prop = meta?.[filter];\n        //console.log(filters);\n        const pass = prop === undefined || !entries.length || entries.includes(prop.toString());\n        //console.log(`${filter} ${pass ? \"pass\" : \"nopass\"} ${prop}`);\n        return passes && pass;\n    }, true);\n};\n\nconst sortedOperators = computed(() =>\n    useCollect(\n        operatorRepo.value\n            .with(\"tickets\", (query) => {\n                query.with(\"category\").where(\"meta\", metaFilter).orderBy(mode.value, \"desc\");\n            })\n            .whereHas(\"tickets\")\n            .orWhere((operator: OperatorModel) => !options.hideEmpty && operator.online)\n            .get(),\n    ).sortBy([\n        [\"online\", \"desc\"],\n        [\"ready\", \"desc\"],\n        [\"free_slots\", \"desc\"],\n        [\"ticket_count\", \"asc\"],\n        [\"name\", \"asc\"],\n    ]),\n);\n\nconst sortedTickets = computed(() =>\n    ticketRepo.value.unbound().with(\"category\").where(\"meta\", metaFilter).orderBy(mode.value, \"desc\").get(),\n);\n\nconst api = useSupervisorApi();\n\nconst closeTicket = ref<HTMLElement | null>(null);\nconst { isOverDropZone } = useDropZone(\n    closeTicket,\n    async (dataTransfer) => {\n        const uuid = dataTransfer?.getData(\"text/plain\");\n        if (!uuid) throw new Error(\"Ticket UUID undefined.\");\n        return await api.close(uuid);\n    },\n    false,\n);\n\nonMounted(() => {\n    channel\n        .listen(Events.Common.PropsInvalidated, () => router.reload())\n        .listen(Events.Operator.Enrolled, operatorRepo.value.enroll)\n        .listen(Events.Operator.Resigned, operatorRepo.value.resign)\n        .listen(Events.Operator.NameChanged, operatorRepo.value.changeName)\n        .listen(Events.Operator.Online, operatorRepo.value.setOnline)\n        .listen(Events.Operator.Offline, operatorRepo.value.setOffline)\n        .listen(Events.Operator.Ready, operatorRepo.value.setReady)\n        .listen(Events.Operator.NotReady, operatorRepo.value.setNotReady)\n        .listen(Events.Operator.TicketLimitAdjusted, operatorRepo.value.adjustTicketLimit)\n        .listen(Events.Operator.ComplexityLimitAdjusted, operatorRepo.value.adjustComplexityLimit)\n        .listen(Events.Ticket.Created, ticketRepo.value.create)\n        .listen(Events.Ticket.Closed, ticketRepo.value.close)\n        .listen(Events.Ticket.Bound, ticketRepo.value.bind)\n        .listen(Events.Ticket.Accepted, ticketRepo.value.accept)\n        .listen(Events.Ticket.Unbound, ticketRepo.value.unbind)\n        .listen(Events.Ticket.CategoryChanged, ticketRepo.value.changeCategory)\n        .listen(Events.Ticket.MetaValueSet, ticketRepo.value.setMetaValue)\n        .listen(Events.Ticket.MetaValuesMerged, ticketRepo.value.mergeMetaValues)\n        .listen(Events.Ticket.MetricsAdjusted, ticketRepo.value.adjustMetrics);\n});\n\nfunction refreshRepositories() {\n    operatorRepo.value.fresh(props.operators);\n    ticketRepo.value.fresh(props.tickets);\n    ticketCategoryRepo.value.fresh(props.ticketCategories);\n}\n\nconst removeNavigateEventListener = router.on(\"navigate\", refreshRepositories);\nconst removeSuccessEventListener = router.on(\"success\", refreshRepositories);\n\nonUnmounted(() => {\n    removeNavigateEventListener();\n    removeSuccessEventListener();\n});\n\nconst itemify = (items: object) => Object.entries(items).map(([title, value]) => ({ title, value }));\n</script>\n\n<style scoped>\n.ticket-monitor:deep(table) {\n    table-layout: fixed;\n}\n.operator-pool-move {\n    transition: transform 0.5s ease-in-out;\n}\n</style>\n"],"names":["handleGesture","wrapper","touchstartX","touchendX","touchstartY","touchendY","dirRatio","minDistance","touchstart","event","touch","_a","touchend","touchmove","createHandlers","value","e","mounted","el","binding","target","options","uid","handlers","keys","eventName","unmounted","_b","Touch","VWindowSymbol","VWindowGroupSymbol","makeVWindowProps","propsFactory","v","makeComponentProps","makeTagProps","makeThemeProps","VWindow","genericComponent","props","_ref","slots","themeClasses","provideTheme","isRtl","useRtl","t","useLocale","group","useGroup","rootRef","ref","isRtlReverse","computed","isReversed","shallowRef","transition","axis","direction","transitionCount","transitionHeight","activeIndex","item","watch","newVal","oldVal","itemsLength","lastIndex","provide","canMoveBack","canMoveForward","prev","next","arrows","prevProps","_createVNode","VBtn","nextProps","touchOptions","_ref2","originalEvent","useRender","_withDirectives","_resolveDirective","makeVWindowItemProps","makeGroupItemProps","makeLazyProps","VWindowItem","val","window","inject","groupItem","useGroupItem","isBooted","useSsrBoot","isTransitioning","hasTransition","onAfterTransition","onBeforeTransition","convertToUnit","onTransitionCancelled","onEnterTransition","nextTick","name","hasContent","useLazy","MaybeTransition","_vShow","VTabsSymbol","makeVTabProps","omit","makeVBtnProps","VTab","attrs","sliderColorClasses","sliderColorStyles","useTextColor","rootEl","sliderEl","isHorizontal","isSelected","updateSlider","prevEl","nextEl","color","prevBox","nextBox","xy","XY","rightBottom","widthHeight","prevPos","nextPos","delta","origin","scale","initialScale","sigma","animate","standardEasing","btnProps","_mergeProps","_Fragment","forwardRefs","makeVTabsWindowProps","VTabsWindow","_model","useProxiedModel","model","windowProps","$event","makeVTabsWindowItemProps","VTabsWindowItem","windowItemProps","parseItems","items","isObject","makeVTabsProps","makeVSlideGroupProps","makeDensityProps","VTabs","densityClasses","useDensity","backgroundColorClasses","backgroundColorStyles","useBackgroundColor","toRef","scopeId","useScopeId","provideDefaults","slideGroupProps","VSlideGroup","hasWindow","useDragAndDrop","onDragStart","element","useEventListener","entry","dataTransfer","useDropZone","onDrop","filesOnly","isOverDropZone","counter","isClient","files","__props","useI18n","factors","usePage","tab","md","MarkdownIt","MarkdownItAttrs","useSharedOptions","mode","useSharedDisplayMode","config","createdAt","dayjs","delay","delayedUntil","boundAt","reservation","reservedUntil","acceptedAt","createdAtInfo","delayedUntilInfo","boundAtInfo","reservedUntilInfo","acceptedAtInfo","currentWeightInfo","compact","threshold","position","categoryName","categoryShort","title","cardTitle","cardSubtitle","cardContent","overflow","animation","ticketPool","lock","unlock","triggerElement","usePointerLock","x","useMouse","useRepo","TicketRepository","animationEnabled","onMounted","useSupervisorApi","ready","operatorUuid","route","weight","ticketUuid","weightPoints","handler","close","collapsed","cell","complexity","n","moreIcon","api","ticketRow","uuid","status","toggleReadiness","useSum","models","field","sum","usePluck","getValue","useMax","numbers","useMin","useKeys","useGroupBy","fields","grouped","key","useSortBy","collection","sort","flags","directions","iteratees","orderBy","useCollect","operatorRepo","OperatorRepository","ticketRepo","ticketCategoryRepo","TicketCategoryRepository","channel","usePusherChannel","Events.Channel","filters","reactive","metaFilter","meta","passes","filter","entries","prop","pass","sortedOperators","query","operator","sortedTickets","closeTicket","Events.Common","router","Events.Operator","Events.Ticket","refreshRepositories","removeNavigateEventListener","removeSuccessEventListener","onUnmounted","itemify"],"mappings":"66CAEA,MAAMA,GAAgBC,GAAW,CAC/B,KAAM,CACJ,YAAAC,EACA,UAAAC,EACA,YAAAC,EACA,UAAAC,CACD,EAAGJ,EACEK,EAAW,GACXC,EAAc,GACpBN,EAAQ,QAAUE,EAAYD,EAC9BD,EAAQ,QAAUI,EAAYD,EAC1B,KAAK,IAAIH,EAAQ,OAAO,EAAIK,EAAW,KAAK,IAAIL,EAAQ,OAAO,IACjEA,EAAQ,MAAQE,EAAYD,EAAcK,GAAeN,EAAQ,KAAKA,CAAO,EAC7EA,EAAQ,OAASE,EAAYD,EAAcK,GAAeN,EAAQ,MAAMA,CAAO,GAE7E,KAAK,IAAIA,EAAQ,OAAO,EAAIK,EAAW,KAAK,IAAIL,EAAQ,OAAO,IACjEA,EAAQ,IAAMI,EAAYD,EAAcG,GAAeN,EAAQ,GAAGA,CAAO,EACzEA,EAAQ,MAAQI,EAAYD,EAAcG,GAAeN,EAAQ,KAAKA,CAAO,EAEjF,EACA,SAASO,GAAWC,EAAOR,EAAS,OAClC,MAAMS,EAAQD,EAAM,eAAe,CAAC,EACpCR,EAAQ,YAAcS,EAAM,QAC5BT,EAAQ,YAAcS,EAAM,SAC5BC,EAAAV,EAAQ,QAAR,MAAAU,EAAA,KAAAV,EAAgB,CACd,cAAeQ,EACf,GAAGR,CACP,EACA,CACA,SAASW,GAASH,EAAOR,EAAS,OAChC,MAAMS,EAAQD,EAAM,eAAe,CAAC,EACpCR,EAAQ,UAAYS,EAAM,QAC1BT,EAAQ,UAAYS,EAAM,SAC1BC,EAAAV,EAAQ,MAAR,MAAAU,EAAA,KAAAV,EAAc,CACZ,cAAeQ,EACf,GAAGR,CACP,GACED,GAAcC,CAAO,CACvB,CACA,SAASY,GAAUJ,EAAOR,EAAS,OACjC,MAAMS,EAAQD,EAAM,eAAe,CAAC,EACpCR,EAAQ,WAAaS,EAAM,QAC3BT,EAAQ,WAAaS,EAAM,SAC3BC,EAAAV,EAAQ,OAAR,MAAAU,EAAA,KAAAV,EAAe,CACb,cAAeQ,EACf,GAAGR,CACP,EACA,CACA,SAASa,IAAiB,CACxB,IAAIC,EAAQ,UAAU,OAAS,GAAK,UAAU,CAAC,IAAM,OAAY,UAAU,CAAC,EAAI,CAAA,EAChF,MAAMd,EAAU,CACd,YAAa,EACb,YAAa,EACb,UAAW,EACX,UAAW,EACX,WAAY,EACZ,WAAY,EACZ,QAAS,EACT,QAAS,EACT,KAAMc,EAAM,KACZ,MAAOA,EAAM,MACb,GAAIA,EAAM,GACV,KAAMA,EAAM,KACZ,MAAOA,EAAM,MACb,KAAMA,EAAM,KACZ,IAAKA,EAAM,GACf,EACE,MAAO,CACL,WAAYC,GAAKR,GAAWQ,EAAGf,CAAO,EACtC,SAAUe,GAAKJ,GAASI,EAAGf,CAAO,EAClC,UAAWe,GAAKH,GAAUG,EAAGf,CAAO,CACxC,CACA,CACA,SAASgB,GAAQC,EAAIC,EAAS,OAC5B,MAAMJ,EAAQI,EAAQ,MAChBC,EAASL,GAAA,MAAAA,EAAO,OAASG,EAAG,cAAgBA,EAC5CG,GAAUN,GAAA,YAAAA,EAAO,UAAW,CAChC,QAAS,EACb,EACQO,GAAMX,EAAAQ,EAAQ,WAAR,YAAAR,EAAkB,EAAE,IAEhC,GAAI,CAACS,GAAU,CAACE,EAAK,OACrB,MAAMC,EAAWT,GAAeK,EAAQ,KAAK,EAC7CC,EAAO,eAAiBA,EAAO,gBAAkB,OAAO,OAAO,IAAI,EACnEA,EAAO,eAAeE,CAAG,EAAIC,EAC7BC,GAAKD,CAAQ,EAAE,QAAQE,GAAa,CAClCL,EAAO,iBAAiBK,EAAWF,EAASE,CAAS,EAAGJ,CAAO,CACnE,CAAG,CACH,CACA,SAASK,GAAUR,EAAIC,EAAS,SAC9B,MAAMC,GAAST,EAAAQ,EAAQ,QAAR,MAAAR,EAAe,OAASO,EAAG,cAAgBA,EACpDI,GAAMK,EAAAR,EAAQ,WAAR,YAAAQ,EAAkB,EAAE,IAChC,GAAI,EAACP,GAAA,MAAAA,EAAQ,iBAAkB,CAACE,EAAK,OACrC,MAAMC,EAAWH,EAAO,eAAeE,CAAG,EAC1CE,GAAKD,CAAQ,EAAE,QAAQE,GAAa,CAClCL,EAAO,oBAAoBK,EAAWF,EAASE,CAAS,CAAC,CAC7D,CAAG,EACD,OAAOL,EAAO,eAAeE,CAAG,CAClC,CACO,MAAMM,GAAQ,CACnB,QAAAX,GACA,UAAAS,EACF,EC1FaG,GAAgB,OAAO,IAAI,kBAAkB,EAC7CC,GAAqB,OAAO,IAAI,wBAAwB,EACxDC,GAAmBC,EAAa,CAC3C,WAAY,QACZ,SAAU,CACR,KAAM,CAAC,QAAS,OAAQ,SAAU,MAAM,EACxC,QAAS,OACV,EACD,SAAU,CACR,KAAM,CAAC,QAAS,OAAQ,SAAU,MAAM,EACxC,QAAS,OACV,EACD,QAAS,QACT,WAAY,CACV,KAAM,CAAC,QAAS,MAAM,EACtB,UAAWC,GAAK,OAAOA,GAAM,WAAaA,IAAM,OACjD,EACD,MAAO,CACL,KAAM,CAAC,OAAQ,OAAO,EACtB,QAAS,MACV,EACD,UAAW,CACT,KAAM,OACN,QAAS,YACV,EACD,WAAY,KACZ,SAAU,QACV,cAAe,CACb,KAAM,OACN,QAAS,uBACV,EAED,UAAW,CACT,KAAM,CAAC,QAAS,MAAM,EACtB,QAAS,OACV,EACD,GAAGC,GAAoB,EACvB,GAAGC,GAAc,EACjB,GAAGC,GAAgB,CACrB,EAAG,SAAS,EACCC,GAAUC,EAAgB,EAAG,CACxC,KAAM,UACN,WAAY,CACV,MAAAV,EACD,EACD,MAAOG,GAAkB,EACzB,MAAO,CACL,oBAAqBhB,GAAS,EAC/B,EACD,MAAMwB,EAAOC,EAAM,CACjB,GAAI,CACF,MAAAC,CACD,EAAGD,EACJ,KAAM,CACJ,aAAAE,CACN,EAAQC,GAAaJ,CAAK,EAChB,CACJ,MAAAK,CACD,EAAGC,GAAM,EACJ,CACJ,EAAAC,CACD,EAAGC,GAAS,EACPC,EAAQC,GAASV,EAAOT,EAAkB,EAC1CoB,EAAUC,IACVC,EAAeC,EAAS,IAAMT,EAAM,MAAQ,CAACL,EAAM,QAAUA,EAAM,OAAO,EAC1Ee,EAAaC,GAAW,EAAK,EAC7BC,EAAaH,EAAS,IAAM,CAChC,MAAMI,EAAOlB,EAAM,YAAc,WAAa,IAAM,IAE9CmB,GADUN,EAAa,MAAQ,CAACE,EAAW,MAAQA,EAAW,OACxC,WAAa,GACzC,MAAO,YAAYG,CAAI,GAAGC,CAAS,aACzC,CAAK,EACKC,EAAkBJ,GAAW,CAAC,EAC9BK,EAAmBT,EAAI,MAAS,EAChCU,EAAcR,EAAS,IACpBL,EAAM,MAAM,MAAM,UAAUc,GAAQd,EAAM,SAAS,MAAM,SAASc,EAAK,EAAE,CAAC,CAClF,EACDC,GAAMF,EAAa,CAACG,EAAQC,IAAW,CACrC,MAAMC,EAAclB,EAAM,MAAM,MAAM,OAChCmB,EAAYD,EAAc,EAC5BA,GAAe,EACjBZ,EAAW,MAAQU,EAASC,EACnBD,IAAWG,GAAaF,IAAW,EAC5CX,EAAW,MAAQ,GACVU,IAAW,GAAKC,IAAWE,EACpCb,EAAW,MAAQ,GAEnBA,EAAW,MAAQU,EAASC,CAEpC,CAAK,EACDG,GAAQvC,GAAe,CACrB,WAAA2B,EACA,WAAAF,EACA,gBAAAK,EACA,iBAAAC,EACA,QAAAV,CACN,CAAK,EACD,MAAMmB,EAAchB,EAAS,IAAMd,EAAM,YAAcsB,EAAY,QAAU,CAAC,EACxES,EAAiBjB,EAAS,IAAMd,EAAM,YAAcsB,EAAY,QAAUb,EAAM,MAAM,MAAM,OAAS,CAAC,EAC5G,SAASuB,GAAO,CACdF,EAAY,OAASrB,EAAM,MAC5B,CACD,SAASwB,GAAO,CACdF,EAAe,OAAStB,EAAM,MAC/B,CACD,MAAMyB,EAASpB,EAAS,IAAM,CAC5B,MAAMoB,EAAS,CAAA,EACTC,EAAY,CAChB,KAAM9B,EAAM,MAAQL,EAAM,SAAWA,EAAM,SAC3C,MAAO,aAAaa,EAAa,MAAQ,QAAU,MAAM,GACzD,QAASJ,EAAM,KACf,aAAcF,EAAE,wBAAwB,CAChD,EACM2B,EAAO,KAAKJ,EAAY,MAAQ5B,EAAM,KAAOA,EAAM,KAAK,CACtD,MAAOiC,CACR,CAAA,EAAIC,EAAaC,EAAMF,EAAW,IAAI,EAAIC,EAAa,MAAO,KAAM,IAAI,CAAC,EAC1E,MAAME,EAAY,CAChB,KAAMjC,EAAM,MAAQL,EAAM,SAAWA,EAAM,SAC3C,MAAO,aAAaa,EAAa,MAAQ,OAAS,OAAO,GACzD,QAASJ,EAAM,KACf,aAAcF,EAAE,wBAAwB,CAChD,EACM,OAAA2B,EAAO,KAAKH,EAAe,MAAQ7B,EAAM,KAAOA,EAAM,KAAK,CACzD,MAAOoC,CACR,CAAA,EAAIF,EAAaC,EAAMC,EAAW,IAAI,EAAIF,EAAa,MAAO,KAAM,IAAI,CAAC,EACnEF,CACb,CAAK,EACKK,EAAezB,EAAS,IACxBd,EAAM,QAAU,GAAcA,EAAM,MAejC,CACL,GAfc,CACd,KAAM,IAAM,CACVa,EAAa,MAAQmB,EAAM,EAAGC,EAAI,CACnC,EACD,MAAO,IAAM,CACXpB,EAAa,MAAQoB,EAAM,EAAGD,EAAI,CACnC,EACD,MAAOQ,GAAS,CACd,GAAI,CACF,cAAAC,CACD,EAAGD,EACJC,EAAc,gBAAe,CAC9B,CACT,EAGQ,GAAIzC,EAAM,QAAU,GAAO,CAAA,EAAKA,EAAM,KAC9C,CACK,EACD,OAAA0C,EAAU,IAAMC,GAAgBP,EAAapC,EAAM,IAAK,CACtD,IAAOW,EACP,MAAS,CAAC,WAAY,CACpB,iCAAkCX,EAAM,aAAe,OACxD,EAAEG,EAAa,MAAOH,EAAM,KAAK,EAClC,MAASA,EAAM,KACrB,EAAO,CACD,QAAS,IAAA,SAAM,OAACoC,EAAa,MAAO,CAClC,MAAS,sBACT,MAAS,CACP,OAAQf,EAAiB,KAC1B,CACT,EAAS,EAACjD,EAAA8B,EAAM,UAAN,YAAA9B,EAAA,KAAA8B,EAAgB,CAClB,MAAAO,CACD,GAAGT,EAAM,aAAe,IAASoC,EAAa,MAAO,CACpD,MAAS,oBACjB,EAAS,CAACF,EAAO,KAAK,CAAC,CAAC,CAAC,GAAG9C,EAAAc,EAAM,aAAN,YAAAd,EAAA,KAAAc,EAAmB,CACvC,MAAAO,CACR,EAAQ,EACR,CAAK,EAAG,CAAC,CAACmC,GAAkB,OAAO,EAAGL,EAAa,KAAK,CAAC,CAAC,CAAC,EAChD,CACL,MAAA9B,CACN,CACG,CACH,CAAC,EC/KYoC,GAAuBpD,EAAa,CAC/C,kBAAmB,CACjB,KAAM,CAAC,QAAS,MAAM,EACtB,QAAS,MACV,EACD,WAAY,CACV,KAAM,CAAC,QAAS,MAAM,EACtB,QAAS,MACV,EACD,GAAGE,GAAoB,EACvB,GAAGmD,GAAoB,EACvB,GAAGC,GAAe,CACpB,EAAG,aAAa,EACHC,GAAcjD,EAAgB,EAAG,CAC5C,KAAM,cACN,WAAY,CACV,MAAAV,EACD,EACD,MAAOwD,GAAsB,EAC7B,MAAO,CACL,iBAAkBI,GAAO,EAC1B,EACD,MAAMjD,EAAOC,EAAM,CACjB,GAAI,CACF,MAAAC,CACD,EAAGD,EACJ,MAAMiD,EAASC,GAAO7D,EAAa,EAC7B8D,EAAYC,GAAarD,EAAOT,EAAkB,EAClD,CACJ,SAAA+D,CACD,EAAGC,GAAU,EACd,GAAI,CAACL,GAAU,CAACE,EAAW,MAAM,IAAI,MAAM,mDAAmD,EAC9F,MAAMI,EAAkBxC,GAAW,EAAK,EAClCyC,EAAgB3C,EAAS,IAAMwC,EAAS,QAAUJ,EAAO,WAAW,MAAQlD,EAAM,oBAAsB,GAAQA,EAAM,aAAe,GAAM,EACjJ,SAAS0D,GAAoB,CACvB,CAACF,EAAgB,OAAS,CAACN,IAK/BM,EAAgB,MAAQ,GACpBN,EAAO,gBAAgB,MAAQ,IACjCA,EAAO,gBAAgB,OAAS,EAG5BA,EAAO,gBAAgB,QAAU,IACnCA,EAAO,iBAAiB,MAAQ,SAGrC,CACD,SAASS,GAAqB,OACxBH,EAAgB,OAAS,CAACN,IAK9BM,EAAgB,MAAQ,GACpBN,EAAO,gBAAgB,QAAU,IAEnCA,EAAO,iBAAiB,MAAQU,IAAcxF,EAAA8E,EAAO,QAAQ,QAAf,YAAA9E,EAAsB,YAAY,GAElF8E,EAAO,gBAAgB,OAAS,EACjC,CACD,SAASW,GAAwB,CAC/BH,GACD,CACD,SAASI,EAAkBnF,EAAI,CACxB6E,EAAgB,OAGrBO,GAAS,IAAM,CAET,CAACN,EAAc,OAAS,CAACD,EAAgB,OAAS,CAACN,IAKvDA,EAAO,iBAAiB,MAAQU,GAAcjF,EAAG,YAAY,EACrE,CAAO,CACF,CACD,MAAMsC,EAAaH,EAAS,IAAM,CAChC,MAAMkD,EAAOd,EAAO,WAAW,MAAQlD,EAAM,kBAAoBA,EAAM,WACvE,OAAQyD,EAAc,MAAgB,CACpC,KAAM,OAAOO,GAAS,SAAWd,EAAO,WAAW,MAAQc,EAC3D,cAAeL,EACf,aAAcD,EACd,iBAAkBG,EAClB,cAAeF,EACf,aAAcD,EACd,iBAAkBG,EAClB,QAASC,CACjB,EAToC,EAUpC,CAAK,EACK,CACJ,WAAAG,CACD,EAAGC,GAAQlE,EAAOoD,EAAU,UAAU,EACvC,OAAAV,EAAU,IAAMN,EAAa+B,GAAiB,CAC5C,WAAclD,EAAW,MACzB,SAAY,CAACqC,EAAS,KAC5B,EAAO,CACD,QAAS,IAAM,OAAA,OAACX,GAAgBP,EAAa,MAAO,CAClD,MAAS,CAAC,gBAAiBgB,EAAU,cAAc,MAAOpD,EAAM,KAAK,EACrE,MAASA,EAAM,KAChB,EAAE,CAACiE,EAAW,SAAS7F,EAAA8B,EAAM,UAAN,YAAA9B,EAAA,KAAA8B,GAAiB,CAAC,EAAG,CAAC,CAACkE,GAAQhB,EAAU,WAAW,KAAK,CAAC,CAAC,CAAC,EACrF,CAAA,CAAC,EACK,CACL,UAAAA,CACN,CACG,CACH,CAAC,ECtHYiB,GAAc,OAAO,IAAI,gBAAgB,ECSzCC,GAAgB7E,EAAa,CACxC,MAAO,QACP,YAAa,OACb,WAAY,QACZ,UAAW,CACT,KAAM,OACN,QAAS,YACV,EACD,GAAG8E,GAAKC,GAAc,CACpB,cAAe,kBACf,QAAS,MACb,CAAG,EAAG,CAAC,SAAU,QAAS,OAAQ,WAAY,WAAY,QAAQ,CAAC,CACnE,EAAG,MAAM,EACIC,GAAO1E,EAAgB,EAAG,CACrC,KAAM,OACN,MAAOuE,GAAe,EACtB,MAAMtE,EAAOC,EAAM,CACjB,GAAI,CACF,MAAAC,EACA,MAAAwE,CACD,EAAGzE,EACJ,KAAM,CACJ,iBAAkB0E,EAClB,gBAAiBC,CACvB,EAAQC,GAAa7E,EAAO,aAAa,EAC/B8E,EAASlE,IACTmE,EAAWnE,IACXoE,EAAelE,EAAS,IAAMd,EAAM,YAAc,YAAY,EAC9DiF,EAAanE,EAAS,IAAA,SAAM,QAAA1B,GAAAhB,EAAA0G,EAAO,QAAP,YAAA1G,EAAc,QAAd,YAAAgB,EAAqB,WAAW,QAAS,GAAK,EAChF,SAAS8F,EAAa1C,EAAO,SAC3B,GAAI,CACF,MAAAhE,CACD,EAAGgE,EACJ,GAAIhE,EAAO,CACT,MAAM2G,GAAS/F,GAAAhB,EAAA0G,EAAO,QAAP,YAAA1G,EAAc,IAAI,gBAAlB,YAAAgB,EAAiC,cAAc,mCACxDgG,EAASL,EAAS,MACxB,GAAI,CAACI,GAAU,CAACC,EAAQ,OACxB,MAAMC,EAAQ,iBAAiBF,CAAM,EAAE,MACjCG,EAAUH,EAAO,wBACjBI,EAAUH,EAAO,wBACjBI,EAAKR,EAAa,MAAQ,IAAM,IAChCS,EAAKT,EAAa,MAAQ,IAAM,IAChCU,EAAcV,EAAa,MAAQ,QAAU,SAC7CW,EAAcX,EAAa,MAAQ,QAAU,SAC7CY,EAAUN,EAAQE,CAAE,EACpBK,EAAUN,EAAQC,CAAE,EACpBM,EAAQF,EAAUC,EAAUP,EAAQI,CAAW,EAAIH,EAAQG,CAAW,EAAIJ,EAAQE,CAAE,EAAID,EAAQC,CAAE,EAClGO,GAAS,KAAK,KAAKD,CAAK,EAAI,EAAId,EAAa,MAAQ,QAAU,SAAW,KAAK,KAAKc,CAAK,EAAI,EAAId,EAAa,MAAQ,OAAS,MAAQ,SAEvIgB,IADO,KAAK,IAAIF,CAAK,GAAK,KAAK,KAAKA,CAAK,EAAI,EAAIR,EAAQK,CAAW,EAAIJ,EAAQI,CAAW,IAC5E,KAAK,IAAIL,EAAQK,CAAW,EAAGJ,EAAQI,CAAW,CAAC,GAAK,EACvEM,EAAeX,EAAQK,CAAW,EAAIJ,EAAQI,CAAW,GAAK,EAC9DO,GAAQ,IACdC,GAAQf,EAAQ,CACd,gBAAiB,CAACC,EAAO,cAAc,EACvC,UAAW,CAAC,YAAYI,CAAE,IAAIK,CAAK,YAAYL,CAAE,IAAIQ,CAAY,IAAK,YAAYR,CAAE,IAAIK,EAAQI,EAAK,YAAYT,CAAE,KAAKO,GAAQ,GAAKE,GAAQ,CAAC,IAAK,MAAM,EACzJ,gBAAiB,MAAM,CAAC,EAAE,KAAKH,EAAM,CAC/C,EAAW,CACD,SAAU,IACV,OAAQK,EAClB,CAAS,CACF,CACF,CACD,OAAA1D,EAAU,IAAM,CACd,MAAM2D,EAAWhE,EAAK,YAAYrC,CAAK,EACvC,OAAOoC,EAAaC,EAAMiE,EAAY,CACpC,OAAUjC,GACV,IAAOS,EACP,MAAS,CAAC,QAAS9E,EAAM,KAAK,EAC9B,MAASA,EAAM,MACf,SAAYiF,EAAW,MAAQ,EAAI,GACnC,KAAQ,MACR,gBAAiB,OAAOA,EAAW,KAAK,EACxC,OAAU,EAClB,EAASoB,EAAU3B,EAAO,CAClB,MAAS1E,EAAM,MACf,SAAYA,EAAM,MAAQ,IAAM,OAChC,mBAAoBkF,CAC5B,CAAO,EAAG,CACF,GAAGhF,EACH,QAAS,IAAA,OAAMkC,OAAAA,EAAamE,EAAW,KAAM,GAACnI,EAAA8B,EAAM,UAAN,YAAA9B,EAAA,KAAA8B,KAAqBF,EAAM,KAAM,CAACA,EAAM,YAAcoC,EAAa,MAAO,CACtH,IAAO2C,EACP,MAAS,CAAC,gBAAiBJ,EAAmB,KAAK,EACnD,MAASC,EAAkB,KACrC,EAAW,IAAI,CAAC,CAAC,EACjB,CAAO,CACP,CAAK,EACM4B,GAAY,GAAI1B,CAAM,CAC9B,CACH,CAAC,EC5FY2B,GAAuBhH,EAAa,CAC/C,GAAG8E,GAAK/E,GAAkB,EAAE,CAAC,aAAc,WAAY,WAAY,aAAc,QAAS,WAAW,CAAC,CACxG,EAAG,aAAa,EACHkH,GAAc3G,EAAgB,EAAG,CAC5C,KAAM,cACN,MAAO0G,GAAsB,EAC7B,MAAO,CACL,oBAAqB/G,GAAK,EAC3B,EACD,MAAMM,EAAOC,EAAM,CACjB,GAAI,CACF,MAAAC,CACD,EAAGD,EACJ,MAAMQ,EAAQ0C,GAAOkB,GAAa,IAAI,EAChCsC,EAASC,GAAgB5G,EAAO,YAAY,EAC5C6G,EAAQ/F,EAAS,CACrB,KAAM,OAGJ,OAAI6F,EAAO,OAAS,MAAQ,CAAClG,EAAckG,EAAO,OAI3CvI,EAAAqC,EAAM,MAAM,MAAM,KAAKc,GAAQd,EAAM,SAAS,MAAM,SAASc,EAAK,EAAE,CAAC,IAArE,YAAAnD,EAAwE,KAChF,EACD,IAAI6E,EAAK,CACP0D,EAAO,MAAQ1D,CAChB,CACP,CAAK,EACD,OAAAP,EAAU,IAAM,CACd,MAAMoE,EAAchH,GAAQ,YAAYE,CAAK,EAC7C,OAAOoC,EAAatC,GAASwG,EAAY,CACvC,IAAO,aACR,EAAEQ,EAAa,CACd,WAAcD,EAAM,MACpB,sBAAuBE,GAAUF,EAAM,MAAQE,EAC/C,MAAS,CAAC,gBAAiB/G,EAAM,KAAK,EACtC,MAASA,EAAM,MACf,UAAa,GACb,MAAS,EACjB,CAAO,EAAGE,CAAK,CACf,CAAK,EACM,EACR,CACH,CAAC,EC/CY8G,GAA2BvH,EAAa,CACnD,GAAGoD,GAAsB,CAC3B,EAAG,iBAAiB,EACPoE,GAAkBlH,EAAgB,EAAG,CAChD,KAAM,kBACN,MAAOiH,GAA0B,EACjC,MAAMhH,EAAOC,EAAM,CACjB,GAAI,CACF,MAAAC,CACD,EAAGD,EACJ,OAAAyC,EAAU,IAAM,CACd,MAAMwE,EAAkBlE,GAAY,YAAYhD,CAAK,EACrD,OAAOoC,EAAaY,GAAasD,EAAY,CAC3C,IAAO,iBACR,EAAEY,EAAiB,CAClB,MAAS,CAAC,qBAAsBlH,EAAM,KAAK,EAC3C,MAASA,EAAM,KACvB,CAAO,EAAGE,CAAK,CACf,CAAK,EACM,EACR,CACH,CAAC,ECPD,SAASiH,GAAWC,EAAO,CACzB,OAAKA,EACEA,EAAM,IAAI7F,GACV8F,GAAS9F,CAAI,EAIXA,EAJqB,CAC1B,KAAMA,EACN,MAAOA,CACb,CAEG,EAPkB,EAQrB,CACO,MAAM+F,GAAiB7H,EAAa,CACzC,UAAW,CACT,KAAM,OACN,QAAS,OACV,EACD,MAAO,OACP,UAAW,QACX,MAAO,CACL,KAAM,MACN,QAAS,IAAM,CAAE,CAClB,EACD,QAAS,QACT,QAAS,OACT,KAAM,QACN,OAAQ,CACN,KAAM,CAAC,OAAQ,MAAM,EACrB,QAAS,MACV,EACD,WAAY,QACZ,YAAa,OACb,GAAG8H,GAAqB,CACtB,UAAW,QACX,cAAe,sBACnB,CAAG,EACD,GAAGC,GAAkB,EACrB,GAAG5H,GAAc,CACnB,EAAG,OAAO,EACG6H,GAAQ1H,EAAgB,EAAG,CACtC,KAAM,QACN,MAAOuH,GAAgB,EACvB,MAAO,CACL,oBAAqB5H,GAAK,EAC3B,EACD,MAAMM,EAAOC,EAAM,CACjB,GAAI,CACF,MAAAyE,EACA,MAAAxE,CACD,EAAGD,EACJ,MAAM4G,EAAQD,GAAgB5G,EAAO,YAAY,EAC3CoH,EAAQtG,EAAS,IAAMqG,GAAWnH,EAAM,KAAK,CAAC,EAC9C,CACJ,eAAA0H,CACN,EAAQC,GAAW3H,CAAK,EACd,CACJ,uBAAA4H,EACA,sBAAAC,CACD,EAAGC,GAAmBC,EAAM/H,EAAO,SAAS,CAAC,EACxC,CACJ,QAAAgI,CACD,EAAGC,GAAU,EACd,OAAAC,GAAgB,CACd,KAAM,CACJ,MAAOH,EAAM/H,EAAO,OAAO,EAC3B,UAAW+H,EAAM/H,EAAO,WAAW,EACnC,QAAS+H,EAAM/H,EAAO,SAAS,EAC/B,MAAO+H,EAAM/H,EAAO,WAAW,EAC/B,YAAa+H,EAAM/H,EAAO,aAAa,EACvC,WAAY+H,EAAM/H,EAAO,YAAY,CACtC,CACP,CAAK,EACD0C,EAAU,IAAM,CACd,MAAMyF,EAAkBC,GAAY,YAAYpI,CAAK,EAC/CqI,EAAY,CAAC,EAAEnI,EAAM,QAAUF,EAAM,MAAM,OAAS,GAC1D,OAAOoC,EAAamE,EAAW,KAAM,CAACnE,EAAagG,GAAa9B,EAAY6B,EAAiB,CAC3F,WAActB,EAAM,MACpB,sBAAuBE,GAAUF,EAAM,MAAQE,EAC/C,MAAS,CAAC,SAAU,WAAW/G,EAAM,SAAS,GAAI,sBAAsBA,EAAM,SAAS,GAAI,CACzF,qBAAsBA,EAAM,UAC5B,eAAgBA,EAAM,KACtB,kBAAmBA,EAAM,OACnC,EAAW0H,EAAe,MAAOE,EAAuB,MAAO5H,EAAM,KAAK,EAClE,MAAS,CAAC,CACR,kBAAmB4D,GAAc5D,EAAM,MAAM,CAC9C,EAAE6H,EAAsB,MAAO7H,EAAM,KAAK,EAC3C,KAAQ,UACR,OAAUqE,EAClB,EAAS2D,EAAStD,CAAK,EAAG,CAClB,QAAS,IAAM,OAAA,SAACtG,EAAA8B,EAAM,UAAN,YAAA9B,EAAA,KAAA8B,KAAqBkH,EAAM,MAAM,IAAI7F,UAAQ,QAAAnD,EAAA8B,EAAM,MAAN,YAAA9B,EAAA,KAAA8B,EAAY,CACvE,KAAAqB,CACD,KAAKa,EAAaqC,GAAM6B,EAAY/E,EAAM,CACzC,IAAOA,EAAK,KACZ,MAASA,EAAK,KACxB,CAAS,EAAG,CACF,QAASrB,EAAM,OAAOqB,EAAK,KAAK,EAAE,EAAI,IAAM,OAAA,OAAAnD,EAAA8B,EAAM,OAAOqB,EAAK,KAAK,MAAvB,YAAAnD,EAAA,KAAA8B,EAA6B,CACvE,KAAAqB,CACD,IAAI,MACN,CAAA,EAAC,CAAC,EACJ,CAAA,EAAG8G,GAAajG,EAAasE,GAAaJ,EAAY,CACrD,WAAcO,EAAM,MACpB,sBAAuBE,GAAUF,EAAM,MAAQE,EAC/C,IAAO,aACR,EAAEiB,CAAO,EAAG,CACX,QAAS,IAAM,OAAA,OAACZ,EAAM,MAAM,IAAI7F,GAAI,OAAI,QAAAnD,EAAA8B,EAAM,OAAN,YAAA9B,EAAA,KAAA8B,EAAa,CACnD,KAAAqB,CACV,KAAca,EAAa6E,GAAiB,CAClC,MAAS1F,EAAK,KACxB,EAAW,CACD,QAAS,IAAM,OAAA,OAAAnD,EAAA8B,EAAM,QAAQqB,EAAK,KAAK,MAAxB,YAAAnD,EAAA,KAAA8B,EAA8B,CAC3C,KAAAqB,CACZ,GACA,CAAS,EAAC,GAAGnD,EAAA8B,EAAM,SAAN,YAAA9B,EAAA,KAAA8B,EAAgB,EACtB,CAAA,CAAC,CAAC,CACT,CAAK,EACM,EACR,CACH,CAAC,EC/He,SAAAoI,GACZzJ,EACA0J,EACF,CACE,MAAMC,EAAU5H,IAEY,OAAA6H,EAAA5J,EAAQ,YAAcX,GAAU,CAGpD,GAFJsK,EAAQ,MAAQtK,EAAM,OAElB,OAAOqK,GAAgB,SAAU,CACjC,MAAMG,EAAQH,EACAA,EAAA,CAACC,EAASG,IAAiB,CACrCA,GAAA,MAAAA,EAAc,QAAQ,aAAcH,EAAQ,QAAQE,CAAK,GAAK,GAAE,CAExE,CAEcH,GAAA,MAAAA,EAAAC,EAAQ,MAAOtK,EAAM,aAAY,CAClD,EAE2BuK,EAAA5J,EAAQ,UAAW,IAAM,CACjD2J,EAAQ,MAAQ,IAAA,CACnB,EAEM,CACH,QAAAA,CAAA,CAER,CCvBO,SAASI,GACZ/J,EACAgK,EACAC,EAAY,GACd,CACQ,MAAAC,EAAiBnI,EAAI,EAAK,EAChC,IAAIoI,EAAU,EAEd,OAAIC,KAC4BR,EAAA5J,EAAQ,YAAcX,GAAU,CACxDA,EAAM,eAAe,EACrB8K,IACAD,EAAe,MAAQ,EAAA,CAC1B,EAC2BN,EAAA5J,EAAQ,WAAaX,GAAU,CACvDA,EAAM,eAAe,CAAA,CACxB,EAC2BuK,EAAA5J,EAAQ,YAAcX,GAAU,CACxDA,EAAM,eAAe,EACrB8K,IACIA,IAAY,IAAGD,EAAe,MAAQ,GAAA,CAC7C,EAC2BN,EAAA5J,EAAQ,OAASX,GAAU,OAInD,GAHAA,EAAM,eAAe,EACX8K,EAAA,EACVD,EAAe,MAAQ,GACnBF,EACA,GAAIC,EAAW,CACX,MAAMI,EAAQ,MAAM,OAAK9K,EAAAF,EAAM,eAAN,YAAAE,EAAoB,QAAS,CAAA,CAAE,EACrCyK,EACRK,EAAM,SAAW,EAAI,KAAOA,CAAK,CAAA,MAEzBL,EACR3K,EAAM,YAAY,CAErC,CACH,GAGE,CACH,eAAA6K,CAAA,CAER,yxBC+EA,MAAM/I,EAAQmJ,EAIR,CAAE,EAAA5I,GAAM6I,KAERC,EAAUvI,EAAS,IAAMwI,GAAQ,EAAE,MAAM,OAAiC,EAE1EC,EAAM3I,EAAI,IAAI,EAEd4I,EAAK,IAAIC,GAAW,CAAE,QAAS,GAAM,EAAE,IAAIC,EAAe,EAE1D5K,EAAU6K,KACVC,EAAOC,KAEPC,EAAShJ,EAAS,IAAMwI,GAAQ,EAAE,MAAM,OAAyB,EAEjES,EAAYjJ,EAAS,IAAMkJ,GAAMhK,EAAM,OAAO,UAAU,CAAC,EAEzDiK,EAAQnJ,EAAS,IAAMkJ,GAAM,SAAShK,EAAM,OAAO,MAAO,GAAG,CAAC,EAE9DkK,EAAepJ,EAAS,IAAMiJ,EAAU,MAAM,IAAIE,EAAM,KAAK,CAAC,EAE9DE,EAAUrJ,EAAS,IAAOd,EAAM,OAAO,SAAWgK,GAAMhK,EAAM,OAAO,QAAQ,EAAI,IAAK,EAEtFoK,EAActJ,EAAS,IAAOd,EAAM,OAAO,YAAcgK,GAAM,SAAShK,EAAM,OAAO,YAAa,GAAG,EAAI,IAAK,EAE9GqK,EAAgBvJ,EAAS,IAC3BqJ,EAAQ,OAASC,EAAY,MAAQD,EAAQ,MAAO,IAAIC,EAAY,KAAM,EAAI,IAAA,EAG5EE,EAAaxJ,EAAS,IAAOd,EAAM,OAAO,YAAcgK,GAAMhK,EAAM,OAAO,WAAW,EAAI,IAAK,EAE/FuK,EAAgBzJ,EAAS,IAAM,GAAGiJ,EAAU,MAAM,OAAO,KAAK,CAAC,KAAKA,EAAU,MAAM,QAAS,CAAA,GAAG,EAEhGS,EAAmB1J,EACrB,IAAM,GAAGoJ,EAAa,MAAM,OAAO,KAAK,CAAC,KAAK3J,EAAE,YAAa,CAAE,KAAM2J,EAAa,MAAM,QAAQ,EAAI,CAAA,CAAG,CAAC,GAAA,EAGtGO,EAAc3J,EAAS,IACzBqJ,EAAQ,MAAQ,GAAGA,EAAQ,MAAO,OAAO,KAAK,CAAC,KAAKA,EAAQ,MAAO,QAAA,CAAS,IAAM,IAAA,EAGhFO,EAAoB5J,EAAS,IAC/BuJ,EAAc,MACR,GAAGA,EAAc,MAAO,OAAO,KAAK,CAAC,KAAK9J,EAAE,YAAa,CAAE,KAAM8J,EAAc,MAAO,QAAQ,EAAI,CAAG,CAAA,CAAC,IACtG,IAAA,EAGJM,EAAiB7J,EAAS,IAC5BwJ,EAAW,MAAQ,GAAGA,EAAW,MAAO,OAAO,KAAK,CAAC,KAAKA,EAAW,MAAO,QAAA,CAAS,IAAM,IAAA,EAGzFM,EAAoB9J,EACtB,IACI,GAAG+J,EAAQ7K,EAAM,OAAO,MAAM,CAAC,KAAKO,EAAE,uBAAwB,CAC1D,MAAOP,EAAM,OAAO,iBAAiB,SAAS,CACjD,CAAA,CAAC,GAAA,EAGJ8K,EAAYhK,EAAS,IAAMgJ,EAAO,MAAM,GAAGF,EAAK,KAAK,YAAY,CAAC,EAElEmB,EAAWjK,EAAS,IAAMd,EAAM,OAAO4J,EAAK,KAAK,CAAC,EAElDiB,EAAWrM,GAAmBA,EAAQ,IAASA,EAAQA,EAAM,cAAc,CAAC,EAE5EwM,EAAe,IAAA,SAAM,QAAA5M,EAAA4B,EAAM,OAAO,OAAb,YAAA5B,EAAmB,kBAAiBgB,EAAAY,EAAM,OAAO,WAAb,YAAAZ,EAAuB,OAAQ,IAExF6L,EAAgB,IAAA,SAAM,QAAA7M,EAAA4B,EAAM,OAAO,OAAb,YAAA5B,EAAmB,mBAAkBgB,EAAAY,EAAM,OAAO,WAAb,YAAAZ,EAAuB,QAAS,IAE3F8L,GAAQ,IAAA,OAAO,OAAApM,EAAQ,UAAUV,EAAA4B,EAAM,OAAO,OAAb,YAAA5B,EAAmB,QAAS6M,EAAc,EAAIA,EAAc,GAE7FE,GAAYrK,EAAS,WAAM,QAAA1C,EAAA4B,EAAM,OAAO,OAAb,YAAA5B,EAAmB,aAAc,QAAO,EAEnEgN,GAAetK,EAAS,WAAM,QAAA1C,EAAA4B,EAAM,OAAO,OAAb,YAAA5B,EAAmB,gBAAiB4M,IAAc,EAEhFK,EAAcvK,EAAS,WAAgC,QAAA1C,EAAA4B,EAAM,OAAO,OAAb,YAAA5B,EAAmB,eAA4B,CAAA,EAAE,EAExGkN,GAAWxK,EAAS,IAAMiK,EAAS,MAAQD,EAAU,KAAK,EAE1DS,GAAYzK,EAAS,KAAO,CAC9B,MAAO,CAACiK,EAAS,MAAQ,IACzB,SAAUD,EAAU,MAAQ,GAC9B,EAAA,wjHCjLI,MAAAU,EAAa5K,EAAwB,IAAI,EAC/C0H,GAAekD,EAAY,MAAM,EAEjC,KAAM,CAAE,KAAAC,EAAM,OAAAC,EAAQ,QAAAlD,EAAS,eAAAmD,GAAmBC,GAAeJ,CAAU,EACrE,CAAE,EAAAK,CAAE,EAAIC,GAAS,CAAE,KAAM,WAAY,EAExBhL,EAAS,IAAMiL,GAAQC,EAAgB,CAAC,EAErDxK,GAAA,CAACgH,EAASqD,CAAC,EAAG,CAAC,CAACrD,EAASqD,CAAC,IAAM,CAC9B,CAACrD,GAAW,CAACmD,EAAe,OAEnBA,EAAe,MAAM,QAAQ,IAAA,CAQ7C,EAEK,MAAAM,EAAmBrL,EAAI,EAAK,EAElC,OAAAsL,GAAU,IAAM,CACZ,WAAW,IAAOD,EAAiB,MAAQ,GAAO,GAAG,CAAA,CACxD,4bC3DM,SAASE,IAAmB,CAChB,eAAAC,EAAMC,EAAsBD,EAAgB,CAChD,OAAA,MAAM,OAAO,MAAM,MAAME,GAAM,mCAAoCD,CAAY,EAAG,CAAE,MAAAD,CAAO,CAAA,CACtG,CAEe,eAAAG,EAAOC,EAAoBC,EAAsB,CAC5D,OAAO,MAAM,OAAO,MAAM,MAAMH,GAAM,kCAAmCE,CAAU,EAAG,CAClF,cAAeC,CAAA,CAClB,CACL,CAEe,eAAAC,EAAQF,EAAoBH,EAA8B,CACrE,OAAO,MAAM,OAAO,MAAM,MAAMC,GAAM,mCAAoCE,CAAU,EAAG,CACnF,cAAeH,GAAgB,IAAA,CAClC,CACL,CAEA,eAAeM,EAAMH,EAAoB,CACrC,OAAO,MAAM,OAAO,MAAM,OAAOF,GAAM,iCAAkCE,CAAU,CAAC,CACxF,CAEA,MAAO,CAAE,MAAAJ,EAAO,OAAAG,EAAQ,QAAAG,EAAS,MAAAC,CAAM,CAC3C,iFCYA,MAAM3M,EAAQmJ,EAKV,IAAAyD,EAAYhM,EAAI,EAAK,EAEzB,MAAMiM,EAAO/L,EAAS,IAAOd,EAAM,KAAO,KAAO,IAAK,EAEhD8M,EAAahM,EAAS,IAAMd,EAAM,QAAQ,OAAO,CAAC+M,EAAG,CAAE,WAAAD,CAAW,IAAMC,EAAID,EAAY,CAAC,CAAC,EAE1FE,EAAWlM,EAAS,IAAO8L,EAAU,MAAQ,mBAAqB,gBAAiB,EAEnFK,EAAMd,KAENe,EAAYtM,EAAwB,IAAI,EACxC,CAAE,eAAAmI,GAAmBH,GACvBsE,EACA,MAAOvE,GAAiB,OACd,MAAAwE,EAAOxE,GAAA,YAAAA,EAAc,QAAQ,cACnC,GAAI,CAACwE,EAAY,MAAA,IAAI,MAAM,wBAAwB,EAC7C,MAAAd,GAAejO,EAAA8O,EAAU,QAAV,YAAA9O,EAAiB,QAAQ,KAC9C,OAAO,MAAM6O,EAAI,QAAQE,EAAMd,CAAY,CAC/C,EACA,EAAA,moCC7CJ,MAAMrM,EAAQmJ,EAIRiE,EAAStM,EAAS,IAAO,SAAA,OAC3B,OAAQd,EAAM,SAAS,OACvB,MAAOA,EAAM,SAAS,MACtB,KAAM,CAAC,GAAC5B,EAAA4B,EAAM,SAAS,UAAf,MAAA5B,EAAwB,QAChC,KAAM4B,EAAM,SAAS,eAAiB,QAAQZ,EAAAY,EAAM,SAAS,UAAf,YAAAZ,EAAwB,SAAUY,EAAM,SAAS,YACjG,EAAA,EAEIiN,EAAMd,KAENkB,EAAkB,SAAY,MAAMJ,EAAI,MAAMjN,EAAM,SAAS,KAAM,CAACA,EAAM,SAAS,KAAK,iaC1B9F,SAASsN,GAAOC,EAAQC,EAAO,CAC7B,OAAOD,EAAO,OAAO,CAACE,EAAKlM,KACrB,OAAOA,EAAKiM,CAAK,GAAM,WACzBC,GAAOlM,EAAKiM,CAAK,GAEZC,GACN,CAAC,CACN,CAEA,SAASC,GAASH,EAAQC,EAAO,CAC/B,OAAOD,EAAO,IAAK1G,GAAU8G,GAAS9G,EAAO2G,CAAK,CAAC,EAAE,OAAQjM,GAASA,CAAI,CAC5E,CAEA,SAASqM,GAAOL,EAAQC,EAAO,CAC7B,MAAMK,EAAUH,GAASH,EAAQC,CAAK,EAAE,OAAQjM,GAAS,OAAOA,GAAS,QAAQ,EACjF,OAAOsM,EAAQ,SAAW,EAAI,EAAI,KAAK,IAAI,GAAGA,CAAO,CACvD,CAEA,SAASC,GAAOP,EAAQC,EAAO,CAC7B,MAAMK,EAAUH,GAASH,EAAQC,CAAK,EAAE,OAAQjM,GAAS,OAAOA,GAAS,QAAQ,EACjF,OAAOsM,EAAQ,SAAW,EAAI,EAAI,KAAK,IAAI,GAAGA,CAAO,CACvD,CAEA,SAASE,GAAQR,EAAQ,CACvB,OAAOA,EAAO,IAAK1G,GAAUA,EAAMA,EAAM,aAAc,CAAA,CAAC,CAC1D,CAEA,SAASmH,GAAWT,EAAQU,EAAQ,CAClC,MAAMC,EAAU,CAAA,EACVlO,EAAQ,MAAM,QAAQiO,CAAM,EAAIA,EAAS,CAACA,CAAM,EACtD,OAAAV,EAAO,QAAS1G,GAAU,CACxB,MAAMsH,EAAMnO,EAAM,SAAW,EAAI6G,EAAM7G,EAAM,CAAC,CAAC,EAAI,IAAIA,EAAM,IAAKwN,GAAU3G,EAAM2G,CAAK,CAAC,EAAE,UAAU,IACpGU,EAAQC,CAAG,GAAKD,EAAQC,CAAG,GAAK,CAAE,GAAE,OAAOtH,CAAK,CACpD,CAAG,EACMqH,CACT,CAEA,SAASE,GAAUC,EAAYC,EAAMC,EAAO,CAC1C,MAAMC,EAAa,CAAA,EACbC,EAAY,CAAA,EAClB,cAAOH,GAAS,YAAcG,EAAU,KAAKH,CAAI,GAAKE,EAAW,KAAK,KAAK,EAC3E,MAAM,QAAQF,CAAI,GAAKA,EAAK,QAAS/M,GAASkN,EAAU,KAAKlN,EAAK,CAAC,CAAC,GAAKiN,EAAW,KAAKjN,EAAK,CAAC,CAAC,CAAC,EACjGkN,EAAU,SAAW,GAAKA,EAAU,KAAKH,CAAI,EACtCI,GAAQL,EAAYI,EAAWD,EAAYD,CAAK,CACzD,CAEA,SAASI,GAAWpB,EAAQ,CAC1B,MAAO,CACL,IAAMC,GAAUF,GAAOC,EAAQC,CAAK,EACpC,IAAMA,GAAUM,GAAOP,EAAQC,CAAK,EACpC,IAAMA,GAAUI,GAAOL,EAAQC,CAAK,EACpC,MAAQA,GAAUE,GAASH,EAAQC,CAAK,EACxC,QAAUS,GAAWD,GAAWT,EAAQU,CAAM,EAC9C,OAAQ,CAACK,EAAMC,EAAQ,iBAAmBH,GAAUb,EAAQe,EAAMC,CAAK,EACvE,KAAM,IAAMR,GAAQR,CAAM,CAC9B,CACA,2MCkCA,MAAMvN,EAAQmJ,EAQRrK,EAAU6K,KACVC,EAAOC,KAEP+E,EAAe9N,EAAS,IAAMiL,GAAQ8C,EAAkB,CAAC,EACzDC,EAAahO,EAAS,IAAMiL,GAAQC,EAAgB,CAAC,EACrD+C,EAAqBjO,EAAS,IAAMiL,GAAQiD,EAAwB,CAAC,EACrEC,EAAUC,GAAiBC,EAAc,EAEzCC,EAAUC,GAAmC,CAAA,CAAE,EAC/CC,EAAcC,GACT,OAAO,QAAQH,CAAO,EAAE,OAAgB,CAACI,EAAQ3D,IAAM,CACpD,KAAA,CAAC4D,EAAQC,CAAO,EAAI7D,EACpB8D,EAAOJ,GAAA,YAAAA,EAAOE,GAEdG,EAAOD,IAAS,QAAa,CAACD,EAAQ,QAAUA,EAAQ,SAASC,EAAK,SAAU,CAAA,EAEtF,OAAOH,GAAUI,GAClB,EAAI,EAGLC,EAAkB/O,EAAS,IAC7B6N,GACIC,EAAa,MACR,KAAK,UAAYkB,GAAU,CAClBA,EAAA,KAAK,UAAU,EAAE,MAAM,OAAQR,CAAU,EAAE,QAAQ1F,EAAK,MAAO,MAAM,CAC9E,CAAA,EACA,SAAS,SAAS,EAClB,QAASmG,GAA4B,CAACjR,EAAQ,WAAaiR,EAAS,MAAM,EAC1E,IAAI,GACX,OAAO,CACL,CAAC,SAAU,MAAM,EACjB,CAAC,QAAS,MAAM,EAChB,CAAC,aAAc,MAAM,EACrB,CAAC,eAAgB,KAAK,EACtB,CAAC,OAAQ,KAAK,CAAA,CACjB,CAAA,EAGCC,EAAgBlP,EAAS,IAC3BgO,EAAW,MAAM,QAAQ,EAAE,KAAK,UAAU,EAAE,MAAM,OAAQQ,CAAU,EAAE,QAAQ1F,EAAK,MAAO,MAAM,EAAE,IAAI,CAAA,EAGpGqD,EAAMd,KAEN8D,EAAcrP,EAAwB,IAAI,EAC1C,CAAE,eAAAmI,GAAmBH,GACvBqH,EACA,MAAOtH,GAAiB,CACd,MAAAwE,EAAOxE,GAAA,YAAAA,EAAc,QAAQ,cACnC,GAAI,CAACwE,EAAY,MAAA,IAAI,MAAM,wBAAwB,EAC5C,OAAA,MAAMF,EAAI,MAAME,CAAI,CAC/B,EACA,EAAA,EAGJjB,GAAU,IAAM,CACZ+C,EACK,OAAOiB,GAAc,iBAAkB,IAAMC,GAAO,OAAA,CAAQ,EAC5D,OAAOC,EAAgB,SAAUxB,EAAa,MAAM,MAAM,EAC1D,OAAOwB,EAAgB,SAAUxB,EAAa,MAAM,MAAM,EAC1D,OAAOwB,EAAgB,YAAaxB,EAAa,MAAM,UAAU,EACjE,OAAOwB,EAAgB,OAAQxB,EAAa,MAAM,SAAS,EAC3D,OAAOwB,EAAgB,QAASxB,EAAa,MAAM,UAAU,EAC7D,OAAOwB,EAAgB,MAAOxB,EAAa,MAAM,QAAQ,EACzD,OAAOwB,EAAgB,SAAUxB,EAAa,MAAM,WAAW,EAC/D,OAAOwB,EAAgB,oBAAqBxB,EAAa,MAAM,iBAAiB,EAChF,OAAOwB,EAAgB,wBAAyBxB,EAAa,MAAM,qBAAqB,EACxF,OAAOyB,EAAc,QAASvB,EAAW,MAAM,MAAM,EACrD,OAAOuB,EAAc,OAAQvB,EAAW,MAAM,KAAK,EACnD,OAAOuB,EAAc,MAAOvB,EAAW,MAAM,IAAI,EACjD,OAAOuB,EAAc,SAAUvB,EAAW,MAAM,MAAM,EACtD,OAAOuB,EAAc,QAASvB,EAAW,MAAM,MAAM,EACrD,OAAOuB,EAAc,gBAAiBvB,EAAW,MAAM,cAAc,EACrE,OAAOuB,EAAc,aAAcvB,EAAW,MAAM,YAAY,EAChE,OAAOuB,EAAc,iBAAkBvB,EAAW,MAAM,eAAe,EACvE,OAAOuB,EAAc,gBAAiBvB,EAAW,MAAM,aAAa,CAAA,CAC5E,EAED,SAASwB,GAAsB,CACd1B,EAAA,MAAM,MAAM5O,EAAM,SAAS,EAC7B8O,EAAA,MAAM,MAAM9O,EAAM,OAAO,EACjB+O,EAAA,MAAM,MAAM/O,EAAM,gBAAgB,CACzD,CAEA,MAAMuQ,EAA8BJ,GAAO,GAAG,WAAYG,CAAmB,EACvEE,EAA6BL,GAAO,GAAG,UAAWG,CAAmB,EAE3EG,GAAY,IAAM,CACcF,IACDC,GAAA,CAC9B,EAED,MAAME,EAAWtJ,GAAkB,OAAO,QAAQA,CAAK,EAAE,IAAI,CAAC,CAAC8D,EAAO1M,CAAK,KAAO,CAAE,MAAA0M,EAAO,MAAA1M,CAAQ,EAAA","x_google_ignoreList":[0,1,2,3,4,5,6,7,15]}